<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Convection | Heat Hub</title>
    <link rel="icon" href="https://placehold.co/32x32/FF4D00/FFFFFF?text=🔥" type="image/png">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Oswald:wght@500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Import Map for Three.js Modules -->
    <script type="importmap">
      {
        "imports": {
          "three": "https://cdnjs.cloudflare.com/ajax/libs/three.js/0.165.0/three.module.min.js",
          "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.165.0/examples/jsm/"
        }
      }
    </script>

    <style>
        :root {
            --primary: #FF4D00;
            --primary-light: #FF6A00;
            --secondary: #00B4D8;
            --secondary-light: #00E0FF;
            --dark: #000000;
            --dark-gray: #1A1A1A;
            --medium-gray: #2E2E2E;
            --light-gray: #E0E0E0;
            --white: #FFFFFF;
            --conduction: linear-gradient(135deg, #FF3D3D, #F86F3D, #ECD54D);
            --convection: linear-gradient(135deg, #4ECDC4, #11999E); /* Convection specific gradient */
            --radiation: linear-gradient(135deg, #904E95, #E96443);
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 126, 61, 0.605);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            --text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            --glow-color: #FF4D00; /* For the Heat Hub title glow */
            --primary-color: #FF4D00; /* Ensure this is defined for the title */

            /* Convection specific colors for particles/animation */
            --convection-cold-color: #00B4D8; /* Blueish for cold fluid */
            --convection-hot-color: #FF4D00; /* Orange for hot fluid */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: transparent; /* Make body transparent to show Three.js background */
            color: var(--white);
            line-height: 1.6;
            overflow-x: hidden;
        }

        #threejs-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -2; /* Ensure it's behind everything else */
            overflow: hidden;
            background-color: #000; /* Fallback background */
        }

        #threejs-background::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, transparent 0%, rgba(0, 0, 0, 0.7) 70%, rgba(0, 0, 0, 0.9) 100%);
            z-index: -1; /* Place it above the canvas but below content */
            pointer-events: none; /* Ensure it doesn't block clicks */
        }

        h1, h2, h3, h4 {
            font-weight: 700;
            line-height: 1.2;
        }

        h1 {
            font-size: clamp(2.5rem, 8vw, 4.5rem);
        }

        h2 {
            font-size: clamp(1.8rem, 5vw, 3rem);
            font-family: 'Oswald', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        h3 {
            font-size: clamp(1.5rem, 4vw, 2rem);
        }

        p {
            font-size: clamp(1rem, 2vw, 1.1rem);
            color: rgba(255, 255, 255, 0.8);
        }

        /* ========== LAYOUT & CONTAINERS ========== */
        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .section {
            padding: 6rem 0;
            position: relative;
            background: rgba(10, 10, 10, 0.6);
            border-bottom: 1px solid var(--glass-border);
        }

        .section-header {
            margin-bottom: 3rem;
            text-align: center;
            position: relative;
        }

        .section-header::after {
            content: '';
            display: block;
            width: 100px;
            height: 4px;
            background: var(--primary);
            margin: 1.5rem auto 0;
            border-radius: 2px;
        }

        /* ========== HEADER & NAVIGATION ========== */
        header {
            position: relative;
            padding: 2rem 0;
            background: rgba(10, 10, 10, 0.6);
            border-bottom: 1px solid var(--glass-border);
            z-index: 100;
        }

        .header-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
        }

        .logo {
            font-family: 'Oswald', sans-serif;
            font-weight: 700;
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: var(--text-shadow);
            letter-spacing: 2px;
            position: relative;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .tagline {
            font-style: italic;
            max-width: 800px;
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
            position: relative;
        }

        .tagline::before, .tagline::after {
            content: '"';
            color: var(--primary);
            font-size: 1.5em;
        }

        nav {
            width: 100%;
        }

        .navbar {
            display: flex;
            justify-content: center;
            gap: 1rem;
            list-style: none;
        }

        .nav-item {
            position: relative;
        }

        .nav-link {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            color: var(--white);
            text-decoration: none;
            font-weight: 500;
            border-radius: 50px;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            transition: all 0.3s ease;
            overflow: hidden;
            position: relative;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: width 0.3s ease-out;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .nav-link:hover {
            background: rgba(255, 77, 0, 0.2);
            color: var(--white);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 77, 0, 0.2);
            text-shadow: 0 0 5px var(--primary);
        }
        .nav-link:active {
            transform: scale(0.95);
        }

        .search-box {
            width: 100%;
            max-width: 500px;
            margin: 1rem auto 0;
            position: relative;
        }

        .search-input {
            flex: 1;
            padding: 0.8rem 1rem;
            border: 1px solid var(--medium-gray);
            background: var(--dark);
            color: var(--white);
            border-radius: 5px 0 0 5px;
            outline: none;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .search-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 8px var(--primary);
        }

        .search-btn {
            padding: 0 1rem;
            background: var(--primary);
            color: var(--white);
            border: none;
            border-radius: 0 5px 5px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            background: var(--primary-light);
        }
        .search-btn:active {
            transform: scale(0.95);
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .social-links a {
            color: rgba(255, 255, 255, 0.6);
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .social-links a:hover {
            color: var(--primary);
        }

        /* ========== HERO SECTION (adapted for Convection intro) ========== */
        .hero {
            min-height: 50vh; /* Reduced height as it's not the main hero */
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            overflow: hidden;
            background: transparent;
        }

        .hero-content {
            max-width: 800px;
            position: relative;
            z-index: 2;
            transition: transform 0.1s ease-out;
            margin: 0 auto;
        }

        .hero-title {
            font-size: clamp(2.5rem, 8vw, 4.5rem);
            margin-bottom: 1.5rem;
            background: linear-gradient(90deg, var(--white), var(--light-gray));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .hero-subtitle {
            font-size: clamp(1.2rem, 3vw, 1.5rem);
            margin-bottom: 2rem;
            color: rgba(255, 255, 255, 0.8);
        }

        /* ========== MODES SECTION (adapted for subtopics) ========== */
        .modes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .mode-card {
            position: relative;
            border-radius: 20px;
            overflow: hidden;
            height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 2rem;
            color: var(--white);
            transition: all 0.5s cubic-bezier(0.22, 1, 0.36, 1), box-shadow 0.3s ease, border-color 0.3s ease;
            box-shadow: var(--shadow);
            isolation: isolate;
            border: 1px solid transparent;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }

        .mode-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent 50%);
            z-index: -1;
        }

        .mode-card.convection-card {
            background: var(--convection);
        }

        .mode-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 0 20px var(--primary), 0 20px 40px rgba(0, 0, 0, 0.4);
            border-color: var(--primary);
        }

        .mode-title {
            font-size: 2rem;
            margin-bottom: 1rem;
            text-shadow: var(--text-shadow);
        }

        .mode-description {
            margin-bottom: 1.5rem;
            opacity: 0.9;
        }

        .mode-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--white);
            text-decoration: none;
            font-weight: 600;
            padding: 0.8rem 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            transition: all 0.3s ease;
            align-self: flex-start;
        }

        .mode-link:hover {
            background: rgba(255, 255, 255, 0.2);
            color: var(--white);
            transform: translateX(5px);
            text-shadow: 0 0 5px var(--primary);
        }
        .mode-link:active {
            transform: scale(0.95);
        }

        /* ========== APPLICATIONS SECTION (adapted for generic cards) ========== */
        .applications-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 3rem;
        }

        .app-card {
            background: var(--dark-gray);
            border-radius: 12px;
            padding: 2rem;
            transition: all 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
            border: 1px solid transparent;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }

        .app-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.03), transparent);
            z-index: -1;
        }

        .app-card:hover {
            transform: translateY(-5px) scale(1.01);
            box-shadow: 0 0 15px var(--primary), 0 10px 30px rgba(0, 0, 0, 0.3);
            border-color: var(--primary);
        }

        .app-card h3 {
            color: var(--white);
            margin-bottom: 1rem;
            position: relative;
            display: inline-block;
        }

        .app-card h3::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 40px;
            height: 2px;
            background: var(--primary);
        }

        /* ========== ABOUT SECTION (adapted for generic content) ========== */
        .about-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .founder-highlight {
            color: var(--primary);
            font-weight: 600;
        }

        /* ========== FOOTER ========== */
        footer {
            background: var(--dark-gray);
            padding: 4rem 0 2rem;
            border-top: 1px solid var(--glass-border);
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .footer-column h3 {
            color: var(--white);
            margin-bottom: 1.5rem;
            position: relative;
            padding-bottom: 0.5rem;
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 2px;
            background: var(--primary);
        }

        .footer-links {
            list-style: none;
        }

        .footer-link {
            margin-bottom: 0.8rem;
        }

        .footer-link a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: color 0.3s ease;
            overflow: hidden;
            position: relative;
            display: inline-block;
        }

        .footer-link a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: width 0.3s ease-out;
        }

        .footer-link a:hover::after {
            width: 100%;
        }

        .footer-link a:hover {
            color: var(--primary);
            text-shadow: 0 0 5px var(--primary);
        }

        .copyright {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid var(--glass-border);
            color: rgba(255, 255, 255, 0.5);
        }

        /* ========== ANIMATIONS ========== */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(50px) scale(0.95); } 
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        @keyframes fadeInHeader {
            from { opacity: 0; transform: translateY(50px); letter-spacing: 10px; }
            to { opacity: 1; transform: translateY(0); letter-spacing: 1px; }
        }

        @keyframes fadeInModeCard {
            from { opacity: 0; transform: translateY(50px) scale(0.95) rotateY(15deg); }
            to { opacity: 1; transform: translateY(0) scale(1) rotateY(0deg); }
        }

        /* New animation for subtopics */
        @keyframes slideInBounce {
            0% { opacity: 0; transform: translateX(-50px); }
            60% { opacity: 1; transform: translateX(10px); }
            80% { transform: translateX(-5px); }
            100% { opacity: 1; transform: translateX(0); }
        }

        .fade-in {
            animation: fadeIn 1s cubic-bezier(0.23, 1, 0.32, 1) forwards; 
            opacity: 0;
        }

        .section-header.animate {
            animation: fadeInHeader 1s cubic-bezier(0.23, 1, 0.32, 1) forwards;
        }
        .mode-card.animate {
            animation: fadeInModeCard 1s cubic-bezier(0.23, 1, 0.32, 1) forwards;
        }


        @keyframes animate-from-left {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .animate-from-left {
            animation: animate-from-left 0.6s cubic-bezier(0.23, 1, 0.32, 1) forwards;
            opacity: 0;
        }

        @keyframes menuButtonScaleIn {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        .menu-btn.animate {
            animation: menuButtonScaleIn 0.5s cubic-bezier(0.23, 1, 0.32, 1) forwards;
        }


        .delay-0 { animation-delay: 0s; }
        .delay-1 { animation-delay: 0.2s; }
        .delay-2 { animation-delay: 0.4s; }
        .delay-3 { animation-delay: 0.6s; }
        .delay-4 { animation-delay: 0.8s; } 
        .delay-5 { animation-delay: 1.0s; } 
        .delay-6 { animation-delay: 1.2s; } 
        .delay-7 { animation-delay: 1.4s; }


        /* ========== SIDEBAR STYLES ========== */
        .sidebar {
            position: fixed;
            top: 0;
            left: -350px;
            width: 350px;
            height: 100vh;
            background: var(--dark-gray);
            border-right: 1px solid var(--glass-border);
            z-index: 1000;
            transition: all 0.3s ease;
            overflow-y: auto;
            box-shadow: 5px 0 15px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .sidebar.active {
            left: 0;
        }

        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            border-bottom: 1px solid var(--glass-border);
        }

        .sidebar-header .logo {
            font-size: 1.5rem;
            margin: 0;
        }

        .close-btn {
            background: transparent;
            border: none;
            color: var(--white);
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            color: var(--primary);
            transform: rotate(90deg);
        }
        .close-btn:active { 
            transform: rotate(90deg) scale(0.9);
        }

        .sidebar-menu {
            list-style: none;
            padding: 1rem 0;
        }

        .sidebar-menu li a {
            display: flex;
            align-items: center;
            padding: 1rem 1.5rem;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: all 0.3s ease;
            overflow: hidden;
            position: relative;
        }

        .sidebar-menu li a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: width 0.3s ease-out;
        }

        .sidebar-menu li a:hover::after {
            width: 100%;
        }

        .sidebar-menu li a i {
            margin-right: 1rem;
            width: 20px;
            text-align: center;
        }

        .sidebar-menu li a:hover {
            background: rgba(255, 255, 255, 0.05);
            color: var(--white);
            padding-left: 2rem;
            text-shadow: 0 0 5px var(--primary);
        }

        .sidebar-menu li a.active {
            background: rgba(255, 77, 0, 0.1);
            color: var(--primary);
            border-left: 3px solid var(--primary);
        }

        .sidebar-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--glass-border);
        }

        .main-content {
            transition: all 0.3s ease;
            position: relative;
            z-index: 1;
        }

        .main-content.sidebar-active {
            margin-left: 350px;
        }

        .menu-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--primary);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            z-index: 999;
            box-shadow: 0 4px 15px rgba(255, 77, 0, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .menu-btn:hover {
            background: var(--primary-light);
            transform: scale(1.1);
        }
        .menu-btn:active { 
            transform: scale(0.95);
        }

        /* Scroll to Top Button */
        #scrollToTopBtn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
            z-index: 998;
            box-shadow: 0 4px 15px rgba(255, 77, 0, 0.3);
        }

        #scrollToTopBtn.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        #scrollToTopBtn:hover {
            background-color: var(--primary-light);
            transform: translateY(-3px);
        }
        #scrollToTopBtn:active {
            transform: scale(0.95);
        }


        /* ========== RESPONSIVE ADJUSTMENTS ========== */
        @media (max-width: 768px) {
            .sidebar {
                width: 280px;
                left: -280px;
            }
            
            .main-content.sidebar-active {
                margin-left: 280px;
            }
            
            .menu-btn {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
            
            .section {
                padding: 4rem 0;
            }
            
            .modes-grid {
                grid-template-columns: 1fr;
            }
            
            .mode-card {
                height: 300px;
            }

            #scrollToTopBtn {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
                bottom: 15px;
                right: 15px;
            }
        }
        @media (max-width: 480px) {
            .sidebar {
                width: 100%;
                left: -100%;
            }
            .main-content.sidebar-active {
                margin-left: 100%;
            }
            .container {
                padding: 0 1rem;
            }
             .convection_heading {
                font-size: clamp(3rem, 15vw, 6rem);
            }
        }

        /* New animations for convection_heading */
        @keyframes heatTextReveal {
            0% {
                opacity: 0;
                transform: translateY(20px) scale(0.95);
                filter: blur(10px);
                text-shadow: 0 0 0px var(--glow-color);
            }
            50% {
                opacity: 1;
                transform: translateY(0) scale(1.02);
                filter: blur(2px);
                text-shadow: 0 0 15px var(--glow-color), 0 0 30px rgba(255, 77, 0, 0.7);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0);
                text-shadow: 0 0 8px var(--glow-color), 0 0 15px rgba(255, 77, 0, 0.5);
            }
        }

        @keyframes glowPulse {
            0% {
                text-shadow: 0 0 10px var(--glow-color), 0 0 20px var(--glow-color), 0 0 30px rgba(255, 77, 0, 0.3);
                transform: scale(1);
            }
            50% {
                text-shadow: 0 0 15px var(--glow-color), 0 0 30px var(--glow-color), 0 0 50px rgba(255, 77, 0, 0.5);
                transform: scale(1.02);
            }
            100% {
                text-shadow: 0 0 10px var(--glow-color), 0 0 20px var(--glow-color), 0 0 30px rgba(255, 77, 0, 0.3);
                transform: scale(1);
            }
        }

        @keyframes colorShift {
            0% { color: #ff6b00; }
            25% { color: #ffaa00; }
            50% { color: #ff4500; }
            75% { color: #ff6b00; }
            100% { color: #ff6b00; }
        }

        @keyframes fireFlicker {
            0%, 100% { opacity: 1; transform: scale(1); }
            25% { opacity: 0.8; transform: scale(0.98); }
            50% { opacity: 1.1; transform: scale(1.02); }
            75% { opacity: 0.9; transform: scale(0.99); }
        }

        .convection_heading {
            font-weight: bold; 
            font-size: clamp(3rem, 10vw, 125px);
            font-family: 'Oswald', sans-serif;
            color: var(--primary-color);
            text-shadow: 0 0 8px var(--glow-color), 0 0 15px rgba(255, 77, 0, 0.5);
            animation: heatTextReveal 1.5s ease-out forwards,
                       glowPulse 2s infinite alternate 1.5s,
                       colorShift 6s infinite linear 1.5s;
            display: inline-block;
            position: relative;
            z-index: 5;
            opacity: 0;
            transform: translateY(20px) scale(0.95);
            filter: blur(10px);
        }
        
        .convection_heading .fire-emoji {
            display: inline-block;
            animation: fireFlicker 0.8s infinite alternate;
        }

        .main-title-container {
            text-align: center;
            margin-top: 50px;
            position: relative;
            z-index: 5;
        }

        /* Specific styles for the convection page content */
        .def {
            max-width: 900px;
            margin: 2rem auto;
            text-align: center;
            padding: 0 1rem;
        }

        .fatc {
            margin-top: 3rem;
            text-align: center;
        }

        /* Container for the grid of pillar concept cards */
        .pillar-concepts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); /* Responsive grid columns */
            gap: 2rem; /* Spacing between cards */
            padding: 1rem 0; /* Padding around the grid */
            margin: 3rem auto;
            max-width: 1200px; /* Max width for the grid container */
            background: rgba(10, 10, 10, 0.4); /* Slightly darker background for the section */
            border-radius: 15px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
            border: 1px solid var(--glass-border);
            padding: 2rem; /* Inner padding for the container */
        }

        /* Individual card for each pillar concept */
        .pillar-concept-card {
            background: linear-gradient(145deg, var(--dark-gray), #282828); /* Gradient background */
            border-radius: 12px;
            padding: 2rem;
            box-shadow: var(--shadow);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid var(--glass-border);
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
            opacity: 0; /* Hidden initially for animation */
            transform: translateY(50px); /* Initial state for fade-in */
        }

        .pillar-concept-card.animate {
            animation: fadeIn 1s cubic-bezier(0.23, 1, 0.32, 1) forwards;
        }

        .pillar-concept-card:hover {
            transform: translateY(-8px) scale(1.02); /* More pronounced lift */
            box-shadow: 0 0 20px var(--primary), 0 15px 40px rgba(0, 0, 0, 0.4); /* Stronger shadow */
            border-color: var(--primary-light); /* Border glow on hover */
        }

        .convection_sbt {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--primary);
            margin-top: 0; 
            margin-bottom: 0.8rem;
            padding-left: 0; 
            position: relative;
            text-align: left; 
            display: flex; 
            align-items: center;
            gap: 0.8rem; 
        }

        .convection_sbt .icon {
            color: var(--secondary); 
            font-size: 1.2em; 
        }

        .convection_sbt::before {
            content: none; 
        }

        .convection_sbt + ul { 
            list-style: none;
            padding-left: 0; 
            margin-left: 0; 
        }

        .convection_all_subtopics {
            list-style: none;
            margin-left: 0; 
            margin-bottom: 0.5rem;
            opacity: 0; 
        }

        .convection_all_subtopics.animate {
            animation: slideInBounce 0.8s cubic-bezier(0.23, 1, 0.32, 1) forwards;
        }

        .convection_all_subtopics a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: all 0.3s ease; /* Combined transition for smoother effects */
            display: flex; /* Use flex for icon alignment */
            align-items: center;
            gap: 0.5rem; /* Space between text and icon */
            padding: 0.6rem 1rem; /* Button-like padding */
            background: rgba(255, 255, 255, 0.08); /* Subtle background for button style */
            border-radius: 8px; /* Rounded corners for button style */
            border: 1px solid rgba(255, 255, 255, 0.1); /* Subtle border */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* Soft shadow */
            position: relative;
            overflow: hidden; /* For future hover effects if needed */
        }

        .convection_all_subtopics a:hover {
            color: var(--white);
            background: rgba(255, 77, 0, 0.2); /* Primary color highlight */
            text-shadow: 0 0 8px var(--primary);
            transform: translateY(-2px) scale(1.01); /* Slight lift and scale */
            box-shadow: 0 4px 10px rgba(255, 77, 0, 0.4); /* Stronger shadow on hover */
            border-color: var(--primary); /* Highlight border */
        }
        .convection_all_subtopics a:active {
            transform: translateY(0) scale(0.99); /* Press effect */
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        .convection_all_subtopics a::before {
            content: none; /* Remove default en dash */
        }
        .convection_all_subtopics a .subtopic-text {
            flex-grow: 1; /* Allow text to take available space */
        }
        .convection_all_subtopics a .fa-chevron-right {
            font-size: 0.8em; /* Smaller arrow icon */
            color: var(--secondary); /* Color for the arrow */
            transition: transform 0.3s ease;
        }
        .convection_all_subtopics a:hover .fa-chevron-right {
            transform: translateX(5px); /* Slide arrow on hover */
        }


        .industrial-list, .future-tech-grid {
            list-style: none;
            padding: 0;
            max-width: 900px;
            margin: 3rem auto;
            background: var(--dark-gray);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: var(--shadow);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid var(--glass-border);
            display: grid; /* Use grid for layout */
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .indus_, .future_tch_points {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.8);
            padding: 0.5rem 1rem;
            background: rgba(255, 77, 0, 0.1);
            border-radius: 8px;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 77, 0, 0.3);
            display: flex;
            align-items: center;
        }

        .indus_::before, .future_tch_points::before {
            content: '\2023'; /* Triangular bullet */
            color: var(--primary);
            margin-right: 0.8rem;
            font-size: 1.2em;
        }

        .indus_:hover, .future_tch_points:hover {
            background: rgba(255, 77, 0, 0.2);
            transform: translateX(5px);
            box-shadow: 0 0 10px rgba(255, 77, 0, 0.4);
        }

        .study_btn {
            display: inline-block;
            padding: 1rem 2rem;
            margin: 1rem;
            background: var(--primary);
            color: var(--white);
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 77, 0, 0.4);
            border: 1px solid var(--primary);
            font-size: 20px; /* Keep original font size */
        }

        .study_btn:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 77, 0, 0.6);
            border-color: var(--primary-light);
        }
        .study_btn:active {
            transform: scale(0.95);
        }

        /* Responsive adjustments for pillar-concept-card */
        @media (max-width: 768px) {
            .pillar-concept-card {
                width: auto; /* Allow grid to manage width */
            }
        }
        @media (max-width: 480px) {
            .pillar-concept-card {
                width: auto; /* Allow grid to manage width */
                margin: 0; /* Remove horizontal margins as gap will handle */
            }
            .pillar-concepts-container {
                padding: 1rem; /* Adjust container padding */
            }
        }
    </style>
</head>
<body>
    <!-- Three.js Background Canvas Container -->
    <div id="threejs-background"></div>

    <div class="main-title-container">
        <h1 class="convection_heading">ＣＯＮＶＥＣＴＩＯＮ</h1>
    </div>

    <!-- Sidebar Navigation -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h1 class="logo">HEAT HUB</h1>
            <button class="close-btn"><i class="fas fa-times"></i></button>
        </div>
        <ul class="sidebar-menu">
            <li><a href="HT.html" class="animate-from-left delay-0"><i class="fas fa-home"></i> Home</a></li>
            <li><a href="register.html" class="animate-from-left delay-1"><i class="fas fa-user-plus"></i> Register</a></li>
            <li><a href="AR/front.html" class="animate-from-left delay-2"><i class="fas fa-cube"></i> AR Models</a></li>
            <li><a href="profile.html" class="animate-from-left delay-3"><i class="fas fa-user"></i> Profile</a></li>
            <li><a href="tutorial.html" class="animate-from-left delay-4"><i class="fas fa-book"></i> Tutorials</a></li>
            <li><a href="calculator.html" class="animate-from-left delay-5"><i class="fas fa-calculator"></i> Calculators</a></li>
            <li><a href="contact.html" class="animate-from-left delay-6"><i class="fas fa-envelope"></i> Contact</a></li>
        </ul>
        <div class="sidebar-footer">
            <div class="search-box">
                <input type="text" placeholder="Search..." class="search-input">
                <button class="search-btn"><i class="fas fa-search"></i></button>
            </div>
            <div class="social-links">
                <a href="#"><i class="fab fa-facebook"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-linkedin"></i></a>
                <a href="#"><i class="fab fa-youtube"></i></a>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Menu Button -->
        <button class="menu-btn animate"><i class="fas fa-bars"></i></button>

        <section class="section hero">
            <div class="container">
                <div class="hero-content">
                    <p class="def fade-in delay-3">
                        Welcome to our educational portal on <strong>Heat Convection</strong> – your comprehensive resource for understanding fluid motion heat transfer, boundary layer theory, and practical applications in engineering systems. Explore our structured modules to master both natural and forced convection phenomena.
                    </p>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <div class="section-header fade-in delay-0">
                    <h2>Definition</h2>
                </div>
                <p class="def fade-in delay-1">Convection is one of the three primary modes of heat transfer (the others being conduction and radiation). It involves the transfer of heat through a fluid (liquid or gas) caused by the movement of the fluid itself. This process occurs as warmer, less dense regions of a fluid rise, and cooler, denser regions sink, creating a circulation pattern that transfers thermal energy.</p>
            </div>
        </section>

        <section class="section" style="background: rgba(10, 10, 10, 0.5);">
            <div class="container">
                <div class="section-header fade-in delay-0">
                    <h2>Father Of Convection</h2>
                </div>
                <p class="def fade-in delay-1">The study of convection was significantly advanced by Isaac Newton, who is often credited with early work in the field. His law of cooling laid the groundwork for understanding convective heat transfer, making him a foundational figure in the study of convection.</p>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <div class="section-header fade-in delay-0">
                    <h2>Pillar Concepts of Convection</h2>
                </div>
                <!-- New container for a grid of cards -->
                <div class="pillar-concepts-container">
                    <div class="pillar-concept-card">
                        <h3 class="convection_sbt"><i class="fas fa-cloud icon"></i> Basics of Convection</h3>
                        <ul>
                            <li class="convection_all_subtopics"><a href="basic/defination.html"><span class="subtopic-text">Definition and physical meaning</span> <i class="fas fa-chevron-right"></i></a></li>
                            <li class="convection_all_subtopics"><a href="basic/naturalforced.html"><span class="subtopic-text">Distinction between natural and forced convection</span> <i class="fas fa-chevron-right"></i></a></li>
                            <li class="convection_all_subtopics"><a href="basic/fluidmotion.html"><span class="subtopic-text">Role of fluid motion in heat transfer</span> <i class="fas fa-chevron-right"></i></a></li>
                        </ul>
                    </div>
                
                    <div class="pillar-concept-card">
                        <h3 class="convection_sbt"><i class="fas fa-balance-scale icon"></i> Newton's Law of Cooling</h3>
                        <ul>
                            <li class="convection_all_subtopics"><a href="newtonlaw/convectivecoffecient.html"><span class="subtopic-text">Convective heat transfer coefficient (h)</span> <i class="fas fa-chevron-right"></i></a></li>
                            <li class="convection_all_subtopics"><a href="newtonlaw/physicalsignificance.html"><span class="subtopic-text">Physical significance and units</span> <i class="fas fa-chevron-right"></i></a></li>
                            <li class="convection_all_subtopics"><a href="newtonlaw/surfaceandtempdiff.html"><span class="subtopic-text">Surface area and temperature difference</span> <i class="fas fa-chevron-right"></i></a></li>
                        </ul>
                    </div>
                
                    <div class="pillar-concept-card">
                        <h3 class="convection_sbt"><i class="fas fa-calculator icon"></i> Dimensionless Numbers</h3>
                        <ul>
                            <li class="convection_all_subtopics"><a href="dimensionless/renoyldsno.html"><span class="subtopic-text">Reynolds Number (Re)</span> <i class="fas fa-chevron-right"></i></a></li>
                            <li class="convection_all_subtopics"><a href="dimensionless/prandtlno.html"><span class="subtopic-text">Prandtl Number (Pr)</span> <i class="fas fa-chevron-right"></i></a></li>
                            <li class="convection_all_subtopics"><a href="dimensionless/nusseltno.html"><span class="subtopic-text">Nusselt Number (Nu)</span> <i class="fas fa-chevron-right"></i></a></li>
                            <li class="convection_all_subtopics"><a href="dimensionless/grashof.html"><span class="subtopic-text">Grashof Number (Gr) – for natural convection</span> <i class="fas fa-chevron-right"></i></a></li>
                        </ul>
                    </div>
                
                    <div class="pillar-concept-card">
                        <h3 class="convection_sbt"><i class="fas fa-wind icon"></i> Forced Convection</h3>
                        <ul>
                            <li class="convection_all_subtopics"><a href="forcedconvection/externalflow.html"><span class="subtopic-text">External flow: over flat plates, cylinders, spheres</span> <i class="fas fa-chevron-right"></i></a> </li>    
                            <li class="convection_all_subtopics"><a href="forcedconvection/internalflow.html"><span class="subtopic-text">Internal flow: pipe flow (hydrodynamic and thermal entry)</span> <i class="fas fa-chevron-right"></i></a></li>
                            <li class="convection_all_subtopics"><a href="forcedconvection/empirical.html"><span class="subtopic-text">Empirical correlations and Dittus-Boelter equation</span> <i class="fas fa-chevron-right"></i></a></li>
                        </ul>
                    </div>
                
                    <div class="pillar-concept-card">
                        <h3 class="convection_sbt"><i class="fas fa-mountain icon"></i> Natural Convection</h3>
                        <ul>
                            <li class="convection_all_subtopics"><a href="naturalconvection/mechanism.html"><span class="subtopic-text">Mechanism and driving force (buoyancy)</span> <i class="fas fa-chevron-right"></i></a></li>
                            <li class="convection_all_subtopics"><a href="naturalconvection/flowover.html"><span class="subtopic-text">Flow over vertical and horizontal surfaces</span> <i class="fas fa-chevron-right"></i></a></li>
                            <li class="convection_all_subtopics"><a href="naturalconvection/grahof.html"><span class="subtopic-text">Characteristic Grashof-Prandtl interactions</span> <i class="fas fa-chevron-right"></i></a></li>
                        </ul>
                    </div>
                
                    <div class="pillar-concept-card">
                        <h3 class="convection_sbt"><i class="fas fa-exchange-alt icon"></i> Combined Convection</h3>
                        <ul>
                            <li class="convection_all_subtopics"><a href="combined/naturalforced.html"><span class="subtopic-text">Interaction of natural and forced convection</span> <i class="fas fa-chevron-right"></i></a></li>
                            <li class="convection_all_subtopics"><a href="combined/dom.html"><span class="subtopic-text">Dominance criterion: Gr/Re²</span> <i class="fas fa-chevron-right"></i></a></li>
                        </ul>
                    </div>
                
                    <div class="pillar-concept-card">
                        <h3 class="convection_sbt"><i class="fas fa-water icon"></i> Heat Transfer in Turbulent Flow</h3>
                        <ul>
                            <li class="convection_all_subtopics"><a href="turbulance/char.html"><span class="subtopic-text">Turbulence characteristics</span> <i class="fas fa-chevron-right"></i></a></li>
                            <li class="convection_all_subtopics"><a href="turbulance/enhancement.html"><span class="subtopic-text">Enhancement of heat transfer</span> <i class="fas fa-chevron-right"></i></a></li>
                            <li class="convection_all_subtopics"><a href="turbulance/layer.html"><span class="subtopic-text">Turbulent boundary layers</span> <i class="fas fa-chevron-right"></i></a></li>
                        </ul>
                    </div>
                
                    <div class="pillar-concept-card">
                        <h3 class="convection_sbt"><i class="fas fa-border-all icon"></i> Boundary Layer Concept</h3>
                        <ul>
                            <li class="convection_all_subtopics"><a href="boundary/laminarturbulant.html"><span class="subtopic-text">Thermal vs velocity boundary layers</span> <i class="fas fa-chevron-right"></i></a></li>
                            <li class="convection_all_subtopics"><a href="boundary/theremalvsvelocity.html"><span class="subtopic-text">Laminar vs turbulent boundary layer behavior</span> <i class="fas fa-chevron-right"></i></a></li>
                        </ul>
                    </div>
                
                    <div class="pillar-concept-card">
                        <h3 class="convection_sbt"><i class="fas fa-gas-pump icon"></i> Boiling and Condensation</h3>
                        <ul>
                            <li class="convection_all_subtopics"><a href="boilingcondensation/remis.html"><span class="subtopic-text">Boiling regimes: nucleate, transition, film</span> <i class="fas fa-chevron-right"></i></a></li>
                            <li class="convection_all_subtopics"><a href="boilingcondensation/heatflux.html"><span class="subtopic-text">Heat flux and critical heat flux (CHF)</span> <i class="fas fa-chevron-right"></i></a></li>
                            <li class="convection_all_subtopics"><a href="boilingcondensation/flimdrop.html"><span class="subtopic-text">Film and dropwise condensation</span> <i class="fas fa-chevron-right"></i></a></li>
                        </ul>
                    </div>
                
                    <div class="pillar-concept-card">
                        <h3 class="convection_sbt"><i class="fas fa-fan icon"></i> Heat Exchangers</h3>
                        <ul>
                            <li class="convection_all_subtopics"><a href="heatexchanger/flows.html"><span class="subtopic-text">Types: parallel flow, counterflow, crossflow</span> <i class="fas fa-chevron-right"></i></a></li>
                            <li class="convection_all_subtopics"><a href="heatexchanger/overallht.html"><span class="subtopic-text">Overall heat transfer coefficient (U)</span> <i class="fas fa-chevron-right"></i></a></li>
                            <li class="convection_all_subtopics"><a href="heatexchanger/lmtd.html"><span class="subtopic-text">LMTD and effectiveness-NTU methods</span> <i class="fas fa-chevron-right"></i></a></li>
                        </ul>
                    </div>
                
                    <div class="pillar-concept-card">
                        <h3 class="convection_sbt"><i class="fas fa-cogs icon"></i> Numerical Methods in Convection</h3>
                        <ul>
                            <li class="convection_all_subtopics"><a href="numericalmethods/finitediff.html"><span class="subtopic-text">Finite difference approach</span> <i class="fas fa-chevron-right"></i></a></li>
                            <li class="convection_all_subtopics"><a href="numericalmethods/boundary.html"><span class="subtopic-text">Boundary conditions in convection problems</span> <i class="fas fa-chevron-right"></i></a></li>
                            <li class="convection_all_subtopics"><a href="numericalmethods/stability.html"><span class="subtopic-text">Stability and convergence issues</span> <i class="fas fa-chevron-right"></i></a></li>
                        </ul>
                    </div>
                
                    <div class="pillar-concept-card">
                        <h3 class="convection_sbt"><i class="fas fa-flask icon"></i> Special Topics</h3>
                        <ul>
                            <li class="convection_all_subtopics"><a href="special/convection.html"><span class="subtopic-text">Convection in porous media</span> <i class="fas fa-chevron-right"></i></a></li>
                            <li class="convection_all_subtopics"><a href="special/micronano.html"><span class="subtopic-text">Micro/nanoscale convection</span> <i class="fas fa-chevron-right"></i></a></li>
                            <li class="convection_all_subtopics"><a href="special/convectionenhance.html"><span class="subtopic-text">Enhanced convection techniques (fins, turbulators)</span> <i class="fas fa-chevron-right"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section class="section" style="background: rgba(10, 10, 10, 0.5);">
            <div class="container">
                <div class="section-header fade-in delay-0">
                    <h2>ɪɴᴅᴜꜱᴛʀɪᴀʟ ᴜꜱᴀɢᴇ ᴏꜰ ᴄᴏɴᴠᴇᴄᴛɪᴏɴ</h2>
                </div>
                <ul class="industrial-list fade-in delay-1">
                    <li class="indus_">HVAC Systems</li>
                    <li class="indus_">Furnaces and Boilers</li>
                    <li class="indus_">Heat Exchangers</li>
                    <li class="indus_">Cooling Towers</li>
                    <li class="indus_">Combustion Chambers</li>
                    <li class="indus_">Electronics Cooling</li>
                    <li class="indus_">Drying Processes</li>
                    <li class="indus_">Food Processing</li>
                    <li class="indus_">Automotive Radiators</li>
                    <li class="indus_">Refrigeration and Air Conditioning</li>
                    <li class="indus_">Geothermal Systems</li>
                    <li class="indus_">Chemical Reactors</li>
                    <li class="indus_">Thermal Power Plants</li>
                    <li class="indus_">Solar Water Heating</li>
                    <li class="indus_">Wind Tunnels</li>
                    <li class="indus_">Marine and Aerospace Cooling</li>
                    <li class="indus_">Environmental Engineering</li>
                    <li class="indus_">Meteorology and Climate Modeling</li>
                    <li class="indus_">Medical Devices</li>
                    <li class="indus_">Building Design and Energy Efficiency</li>
                </ul>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <div class="section-header fade-in delay-0">
                    <h2>ꜰᴜᴛᴜʀᴇ ᴛᴇᴄʜɴᴏʟᴏɢɪᴇꜱ ɪɴ ᴄᴏɴᴠᴇᴄᴛɪᴏɴ</h2>
                </div>
                <ul class="future-tech-grid fade-in delay-1">
                    <li class="future_tch_points">1.Advanced Convective Cooling Systems</li> 
                    <li class="future_tch_points">4. Smart Fluids and Nanofluids</li>
                    <li class="future_tch_points">7.Passive Convection Technologies</li>
                    <li class="future_tch_points">2.Microchannel Heat Exchangers</li>
                    <li class="future_tch_points">5.3D Printed Cooling Structures</li>
                    <li class="future_tch_points">8.Heat Pipes and Vapor Chambers</li>
                    <li class="future_tch_points">3.Active Thermal Management Systems</li>
                    <li class="future_tch_points">6.Bio-Inspired Convection Systems</li>
                    <li class="future_tch_points">9.Artificial Intelligence for Thermal Flow Control</li>
                </ul>
            </div>
        </section>

        <center class="fade-in delay-2">
            <a class="study_btn" href="../HOME PAGE/glossary.html">Study Concept </a>
            <a class="study_btn" href="../HOME PAGE/problemsolving.html">Problem Solving</a>
        </center>
        
        <footer class="fade-in delay-0">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-column">
                        <h3>Explore</h3>
                        <ul class="footer-links">
                            <li class="footer-link"><a href="../HOME PAGE/flowchart.html">Flow Chart</a></li>
                            <li class="footer-link"><a href="../HOME PAGE/problemsolving.html">Problem Solving</a></li>
                            <li class="footer-link"><a href="../HOME PAGE/AR/front.html">AR Models</a></li>
                            <li class="footer-link"><a href="../HOME PAGE/researchpaper.html">Research Papers</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h3>Resources</h3>
                        <ul class="footer-links">
                            <li class="footer-link"><a href="../HOME PAGE/tutorial.html">Tutorials</a></li>
                            <li class="footer-link"><a href="../HOME PAGE/calculator.html">Calculators</a></li>
                            <li class="footer-link"><a href="../HOME PAGE/casestudy.html">Case Studies</a></li>
                            <li class="footer-link"><a href="../HOME PAGE/glossary.html">Glossary</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h3>Connect</h3>
                        <ul class="footer-links">
                            <li class="footer-link"><a href="../HOME PAGE/contact.html">Contact Us</a></li>
                            <li class="footer-link"><a href="../HOME PAGE/contribute.html">Contribute</a></li>
                            <li class="footer-link"><a href="../HOME PAGE/feedback.html">Feedback</a></li>
                            <li class="footer-link"><a href="../HOME PAGE/career.html">Careers</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="copyright">
                    <p>&copy; 2025 HEAT HUB | All Rights Reserved</p>
                </div>
            </div>
        </footer>

        <!-- Scroll to Top Button -->
        <button id="scrollToTopBtn" title="Go to top">
            <i class="fas fa-arrow-up"></i>
        </button>
    </div>

    <script type="module">
        import * as THREE from 'three';
        import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
        import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
        import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';

        // --- Global Variables ---
        let scene, camera, renderer, composer;
        let fluidContainerMesh, particles = [];
        let heatSourcePlane;
        const clock = new THREE.Clock();
        let scrollSpeedFactor = 1.0;

        // Camera control variables
        let isDragging = false;
        let isPinching = false;
        let previousTouchDistance = 0;
        let startX = 0;
        let startY = 0;
        let currentRotationX = 0;
        let currentRotationY = 0;
        let targetRotationX = 0;
        let targetRotationY = 0;
        let zoomLevel = 10; // Initial camera Z position (zoom)
        const minZoom = 5;
        const maxZoom = 20;
        const rotationSpeed = 0.005;
        const zoomSpeed = 0.1;

        // Convection simulation parameters
        const particleCountX = 15;
        const particleCountY = 25; // More particles vertically to show flow
        const particleCountZ = 5;
        const particleSpacing = 0.8;
        const containerWidth = (particleCountX - 1) * particleSpacing;
        const containerHeight = (particleCountY - 1) * particleSpacing;
        const containerDepth = (particleCountZ - 1) * particleSpacing;

        const particleMoveSpeed = 0.2; // Speed around the ellipse
        const maxParticleIntensity = 3.0; // Max emissive intensity for particles
        const particleBaseColor = new THREE.Color(getComputedStyle(document.documentElement).getPropertyValue('--convection-cold-color').trim());
        const particleHotColor = new THREE.Color(getComputedStyle(document.documentElement).getPropertyValue('--convection-hot-color').trim());

        // --- Initialization ---
        function init() {
            const container = document.getElementById('threejs-background');

            // Scene
            scene = new THREE.Scene();

            // Camera
            camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 100);
            camera.position.set(0, 0, zoomLevel);
            camera.lookAt(scene.position);

            // Renderer
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(window.innerWidth, window.innerHeight);
            container.appendChild(renderer.domElement);

            // --- Fluid Container (Transparent Box) ---
            const fluidContainerGeometry = new THREE.BoxGeometry(containerWidth * 1.1, containerHeight * 1.1, containerDepth * 1.1);
            const fluidContainerMaterial = new THREE.MeshStandardMaterial({
                color: 0x222222, // Dark grey
                transparent: true,
                opacity: 0.1, // Very subtle transparency
                roughness: 0.5,
                metalness: 0.5,
                side: THREE.DoubleSide
            });
            fluidContainerMesh = new THREE.Mesh(fluidContainerGeometry, fluidContainerMaterial);
            scene.add(fluidContainerMesh);

            // --- Heat Source (Glowing Plane at the bottom) ---
            const heatSourceGeometry = new THREE.PlaneGeometry(containerWidth * 0.8, containerDepth * 0.8);
            const heatSourceMaterial = new THREE.MeshBasicMaterial({
                color: 0xFF4500, // Deep orange/red
                side: THREE.DoubleSide,
                transparent: true,
                opacity: 0.8,
                blending: THREE.AdditiveBlending
            });
            heatSourcePlane = new THREE.Mesh(heatSourceGeometry, heatSourceMaterial);
            heatSourcePlane.rotation.x = -Math.PI / 2; // Rotate to be horizontal
            heatSourcePlane.position.y = -containerHeight / 2 - 0.1; // Position at the bottom
            scene.add(heatSourcePlane);

            // --- Particles (Fluid Molecules) ---
            const particleGeometry = new THREE.SphereGeometry(0.1, 8, 8); // Small spheres
            const particleMaterial = new THREE.MeshStandardMaterial({
                color: particleBaseColor,
                emissive: particleBaseColor,
                emissiveIntensity: 0.5,
                roughness: 0.5,
                metalness: 0.5
            });

            for (let x = 0; x < particleCountX; x++) {
                for (let y = 0; y < particleCountY; y++) {
                    for (let z = 0; z < particleCountZ; z++) {
                        const particle = new THREE.Mesh(particleGeometry, particleMaterial.clone());
                        // Initialize particles with a random angle for staggered elliptical motion
                        particle.userData.angle = Math.random() * Math.PI * 2;
                        // Store original Z for depth
                        particle.userData.originalZ = z * particleSpacing - containerDepth / 2;
                        fluidContainerMesh.add(particle); // Add particles to the container
                        particles.push(particle);
                    }
                }
            }

            // --- Lighting ---
            const ambientLight = new THREE.AmbientLight(0x404040, 1.5);
            scene.add(ambientLight);

            const pointLight = new THREE.PointLight(0xFFFFFF, 0.5, 50);
            pointLight.position.set(containerWidth / 2 + 5, containerHeight / 2 + 5, containerDepth / 2 + 5);
            scene.add(pointLight);

            // --- Post-processing (Bloom Effect) ---
            composer = new EffectComposer(renderer);
            composer.addPass(new RenderPass(scene, camera));
            const bloomPass = new UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 1.5, 0.4, 0.85);
            bloomPass.threshold = 0.1;
            bloomPass.strength = 1.0; // Adjust bloom intensity
            bloomPass.radius = 0.5; // Adjust bloom radius
            composer.addPass(bloomPass);

            // --- Event Listeners ---
            window.addEventListener('resize', onWindowResize, false);
            container.addEventListener('mousedown', onMouseDown, false);
            container.addEventListener('mouseup', onMouseUp, false);
            container.addEventListener('mousemove', onMouseMove, false);
            container.addEventListener('wheel', onMouseWheel, false);
            container.addEventListener('touchstart', onTouchStart, false);
            container.addEventListener('touchmove', onTouchMove, false);
            container.addEventListener('touchend', onTouchEnd, false);

            window.addEventListener('scroll', () => {
                const scrollY = window.scrollY;
                const documentHeight = document.body.scrollHeight - window.innerHeight;
                let scrollPercentage = 0;
                if (documentHeight > 0) {
                    scrollPercentage = Math.min(1, Math.max(0, scrollY / documentHeight));
                }
                const minFactor = 1.0;
                const maxFactor = 3.0;
                scrollSpeedFactor = minFactor + scrollPercentage * (maxFactor - minFactor);

                const heroContent = document.querySelector('.hero-content');
                if (heroContent) {
                    heroContent.style.transform = `translateY(${scrollY * 0.2}px)`;
                }

                const scrollToTopBtn = document.getElementById('scrollToTopBtn');
                if (scrollY > 300) {
                    scrollToTopBtn.classList.add('show');
                } else {
                    scrollToTopBtn.classList.remove('show');
                }
            });
        }

        // --- Mouse Event Handlers ---
        function onMouseDown(event) {
            isDragging = true;
            startX = event.clientX;
            startY = event.clientY;
        }

        function onMouseUp() {
            isDragging = false;
        }

        function onMouseMove(event) {
            if (!isDragging) return;
            const deltaX = event.clientX - startX;
            const deltaY = event.clientY - startY;
            targetRotationY += deltaX * rotationSpeed;
            targetRotationX += deltaY * rotationSpeed;
            startX = event.clientX;
            startY = event.clientY;
        }

        function onMouseWheel(event) {
            event.preventDefault();
            zoomLevel -= event.deltaY * zoomSpeed * 0.01;
            zoomLevel = Math.max(minZoom, Math.min(maxZoom, zoomLevel));
            camera.position.z = zoomLevel;
        }

        // --- Touch Event Handlers ---
        function getTouchDistance(touches) {
            const dx = touches[0].clientX - touches[1].clientX;
            const dy = touches[0].clientY - touches[1].clientY;
            return Math.sqrt(dx * dx + dy * dy);
        }

        function onTouchStart(event) {
            if (event.touches.length === 1) {
                isDragging = true;
                startX = event.touches[0].clientX;
                startY = event.touches[0].clientY;
            } else if (event.touches.length === 2) {
                isPinching = true;
                previousTouchDistance = getTouchDistance(event.touches);
            }
        }

        function onTouchMove(event) {
            event.preventDefault();
            if (isDragging && event.touches.length === 1) {
                const deltaX = event.touches[0].clientX - startX;
                const deltaY = event.touches[0].clientY - startY;
                targetRotationY += deltaX * rotationSpeed * 1.5;
                targetRotationX += deltaY * rotationSpeed * 1.5;
                startX = event.touches[0].clientX;
                startY = event.touches[0].clientY;
            } else if (isPinching && event.touches.length === 2) {
                const currentTouchDistance = getTouchDistance(event.touches);
                const zoomDelta = currentTouchDistance - previousTouchDistance;
                zoomLevel -= zoomDelta * zoomSpeed * 0.005;
                zoomLevel = Math.max(minZoom, Math.min(maxZoom, zoomLevel));
                camera.position.z = zoomLevel;
                previousTouchDistance = currentTouchDistance;
            }
        }

        function onTouchEnd() {
            isDragging = false;
            isPinching = false;
        }

        // --- Animation Loop ---
        function animate() {
            requestAnimationFrame(animate);

            const delta = clock.getDelta();

            // Define the ellipse parameters for the convection current
            const ellipseXRadius = containerWidth / 2 * 0.8;
            const ellipseYRadius = containerHeight / 2 * 0.8;
            const centerX = 0;
            const centerY = 0; // Center of the container for the ellipse

            particles.forEach(particle => {
                // Update angle for elliptical motion
                particle.userData.angle += particleMoveSpeed * delta * scrollSpeedFactor;

                // Calculate new position based on elliptical path
                particle.position.x = centerX + ellipseXRadius * Math.cos(particle.userData.angle);
                particle.position.y = centerY + ellipseYRadius * Math.sin(particle.userData.angle);
                // Keep Z constant or slightly randomized for depth
                particle.position.z = particle.userData.originalZ + (Math.random() - 0.5) * 0.05; // Add slight jiggle for realism

                // Temperature based on vertical position in the ellipse (or angle)
                // Hottest at the bottom of the ellipse (sin(angle) is -1), coldest at the top (sin(angle) is 1)
                // Map sin(angle) from -1 to 1, to temperature 1 to 0
                const temperature = (1 - Math.sin(particle.userData.angle)) / 2;
                particle.userData.temperature = temperature;

                // Apply color and emissive intensity based on temperature
                const color = particleBaseColor.clone().lerp(particleHotColor, particle.userData.temperature);
                particle.material.color.copy(color);
                particle.material.emissive.copy(color);
                particle.material.emissiveIntensity = particle.userData.temperature * maxParticleIntensity + 0.1; // Ensure some base glow
            });

            // Rotate the entire fluid container for a dynamic view
            fluidContainerMesh.rotation.y += 0.005 * scrollSpeedFactor;
            fluidContainerMesh.rotation.x += 0.002 * scrollSpeedFactor;

            // Apply interactive camera rotation
            currentRotationY += (targetRotationY - currentRotationY) * 0.1;
            currentRotationX += (targetRotationX - currentRotationX) * 0.1;

            camera.position.x = zoomLevel * Math.sin(currentRotationY) * Math.cos(currentRotationX);
            camera.position.y = zoomLevel * Math.sin(currentRotationX);
            camera.position.z = zoomLevel * Math.cos(currentRotationY) * Math.cos(currentRotationX);
            camera.lookAt(scene.position);

            // Render the scene with post-processing
            composer.render();
        }

        // --- Event Handlers ---
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            composer.setSize(window.innerWidth, window.innerHeight);
        }

        // Start the Three.js scene once the window is loaded
        window.onload = function () {
            init();
            animate();
        };

        // Sidebar functionality
        const menuBtn = document.querySelector('.menu-btn');
        const closeBtn = document.querySelector('.close-btn');
        const sidebar = document.querySelector('.sidebar');
        const mainContent = document.querySelector('.main-content');
        const scrollToTopBtn = document.getElementById('scrollToTopBtn');


        menuBtn.addEventListener('click', () => {
            sidebar.classList.add('active');
            mainContent.classList.add('sidebar-active');
        });

        closeBtn.addEventListener('click', () => {
            sidebar.classList.remove('active');
            mainContent.classList.remove('sidebar-active');
        });

        // Close sidebar when clicking outside
        document.addEventListener('click', (e) => {
            if (!sidebar.contains(e.target) && e.target !== menuBtn && !menuBtn.contains(e.target)) {
                sidebar.classList.remove('active');
                mainContent.classList.remove('sidebar-active');
            }
        });

        // Scroll to top functionality
        scrollToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // Add loaded class for animations
        document.addEventListener('DOMContentLoaded', () => {
            const menuButton = document.querySelector('.menu-btn');
            if (menuButton) menuButton.classList.add('animate');
            
            // Animate elements when they come into view using Intersection Observer
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        if (entry.target.classList.contains('section-header')) {
                            entry.target.classList.add('animate');
                        } else if (entry.target.classList.contains('mode-card')) {
                            entry.target.classList.add('animate');
                        } else if (entry.target.classList.contains('pillar-concept-card')) { // Target the new cards
                            entry.target.classList.add('animate'); // Apply card fade-in
                            const subtopics = entry.target.querySelectorAll('.convection_all_subtopics');
                            subtopics.forEach((subtopic, index) => {
                                subtopic.style.animationDelay = `${0.1 * index}s`; // Staggered delay for subtopics within the card
                                subtopic.classList.add('animate'); // Apply the new animation
                            });
                        } else {
                            entry.target.classList.add('animate');
                        }
                    }
                });
            }, { threshold: 0.1 });
            
            // Observe all elements that should have the 'fade-in' animation
            document.querySelectorAll('.section-header, .mode-card, .app-card, footer, .def, .pillar-concept-card, .industrial-list, .future-tech-grid, .study_btn').forEach(el => {
                observer.observe(el);
            });
        });
    </script>
</body>
</html>
