<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HEAT HUB | Heat Transfer Calculator</title>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Import Google Fonts - Inter and Oswald */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Oswald:wght@500;600;700&display=swap');

        /* CSS Variables for consistent theming */
        :root {
            --primary: #FF4D00;
            --primary-light: #FF6A00;
            --secondary: #00B4D8;
            --secondary-light: #00E0FF;
            --dark: #000000;
            --dark-gray: #1A1A1A;
            --medium-gray: #2E2E2E;
            --light-gray: #E0E0E0;
            --white: #FFFFFF;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 126, 61, 0.605);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            --text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            --primary-color: var(--primary);
            --glow-color: #ff6b00;
        }

        /* Universal Box-Sizing */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Body and Base Styles */
        body {
            margin: 0;
            overflow-x: hidden; /* Prevent horizontal scroll */
            background: radial-gradient(ellipse at bottom, #0a0a0a 0%, #000000 100%); /* Deep black with subtle glow for background */
            min-height: 100vh; /* Use min-height for content to extend page */
            display: flex;
            flex-direction: column; /* Arrange content vertically */
            color: var(--white);
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            position: relative;
        }

        /* Heading Styles */
        h1, h2, h3, h4 {
            font-weight: 700;
            line-height: 1.2;
        }

        h1 {
            font-size: clamp(2.5rem, 8vw, 4.5rem);
        }

        h2 {
            font-size: clamp(1.8rem, 5vw, 3rem);
            font-family: 'Oswald', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        h3 {
            font-size: clamp(1.5rem, 4vw, 2rem);
        }

        p {
            font-size: clamp(1rem, 2vw, 1.1rem);
            color: rgba(255, 255, 255, 0.8);
        }

        /* ========== LAYOUT & CONTAINERS ========== */
        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .section {
            padding: 6rem 0;
            position: relative;
        }

        .section-header {
            margin-bottom: 3rem;
            text-align: center;
            position: relative;
        }

        .section-header::after {
            content: '';
            display: block;
            width: 100px;
            height: 4px;
            background: var(--primary);
            margin: 1.5rem auto 0;
            border-radius: 2px;
        }

        /* ========== SIDEBAR STYLES ========== */
        .sidebar {
            position: fixed;
            top: 0;
            left: -350px;
            width: 350px;
            height: 100vh;
            background: var(--dark-gray);
            border-right: 1px solid var(--glass-border);
            z-index: 1000;
            transition: all 0.3s ease;
            overflow-y: auto;
            box-shadow: 5px 0 15px rgba(0, 0, 0, 0.2);
        }

        .sidebar.active {
            left: 0;
        }

        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            border-bottom: 1px solid var(--glass-border);
        }

        .sidebar-header .logo {
            font-size: 1.5rem;
            margin: 0;
            font-family: 'Oswald', sans-serif;
            font-weight: 700;
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: var(--text-shadow);
            letter-spacing: 2px;
        }

        .close-btn {
            background: transparent;
            border: none;
            color: var(--white);
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            color: var(--primary);
            transform: rotate(90deg);
        }

        .sidebar-menu {
            list-style: none;
            padding: 1rem 0;
        }

        .sidebar-menu li a {
            display: flex;
            align-items: center;
            padding: 1rem 1.5rem;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .sidebar-menu li a i {
            margin-right: 1rem;
            width: 20px;
            text-align: center;
        }

        .sidebar-menu li a:hover {
            background: rgba(255, 255, 255, 0.05);
            color: var(--white);
            padding-left: 2rem;
        }

        .sidebar-menu li a.active {
            background: rgba(255, 77, 0, 0.1);
            color: var(--primary);
            border-left: 3px solid var(--primary);
        }

        .sidebar-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--glass-border);
        }

        .search-box {
            display: flex;
            margin-bottom: 1.5rem;
        }

        .search-input {
            flex: 1;
            padding: 0.8rem 1rem;
            border: 1px solid var(--medium-gray);
            background: var(--dark);
            color: var(--white);
            border-radius: 5px 0 0 5px;
            outline: none;
        }

        .search-btn {
            padding: 0 1rem;
            background: var(--primary);
            color: var(--white);
            border: none;
            border-radius: 0 5px 5px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            background: var(--primary-light);
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .social-links a {
            color: rgba(255, 255, 255, 0.6);
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .social-links a:hover {
            color: var(--primary);
        }

        /* ========== MAIN CONTENT & MENU BUTTON ========== */
        .main-content {
            transition: all 0.3s ease;
            flex-grow: 1;
            padding-top: 20px;
        }

        .main-content.sidebar-active {
            margin-left: 350px;
        }

        .menu-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--primary);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            z-index: 999;
            box-shadow: 0 4px 15px rgba(255, 77, 0, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .menu-btn:hover {
            background: var(--primary-light);
            transform: scale(1.1);
        }

        /* ========== FOOTER ========== */
        footer {
            background: var(--dark-gray);
            padding: 4rem 0 2rem;
            border-top: 1px solid var(--glass-border);
            margin-top: auto;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .footer-column h3 {
            color: var(--white);
            margin-bottom: 1.5rem;
            position: relative;
            padding-bottom: 0.5rem;
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 2px;
            background: var(--primary);
        }

        .footer-links {
            list-style: none;
        }

        .footer-link {
            margin-bottom: 0.8rem;
        }

        .footer-link a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-link a:hover {
            color: var(--primary);
        }

        .copyright {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid var(--glass-border);
            color: rgba(255, 255, 255, 0.5);
        }

        /* ========== ANIMATIONS ========== */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 1s ease forwards;
        }

        .delay-1 { animation-delay: 0.2s; }
        .delay-2 { animation-delay: 0.4s; }
        .delay-3 { animation-delay: 0.6s; }
        .delay-4 { animation-delay: 0.8s; }
        .delay-5 { animation-delay: 1.0s; }
        .delay-6 { animation-delay: 1.2s; }

        /* ========== CALCULATOR SPECIFIC STYLES ========== */
        .calculator-card {
            background: var(--dark-gray);
            border-radius: 12px;
            padding: 3rem;
            margin: 3rem auto;
            max-width: 700px;
            box-shadow: var(--shadow);
            border: 1px solid var(--glass-border);
            text-align: center;
        }

        .calculator-card h3 {
            margin-bottom: 2rem;
            color: var(--primary);
            font-size: 2.2rem;
        }

        .mode-selection, .param-selection {
            margin-bottom: 2rem;
        }

        .mode-selection label, .param-selection label {
            display: block;
            margin-bottom: 1rem;
            font-size: 1.1rem;
            font-weight: 500;
        }

        .mode-selection select, .param-selection select {
            width: 100%;
            padding: 0.8rem 1rem;
            border-radius: 8px;
            border: 1px solid var(--medium-gray);
            background: var(--dark);
            color: var(--white);
            font-size: 1rem;
            appearance: none; /* Remove default dropdown arrow */
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23E0E0E0%22%20d%3D%22M287%2C197.3L159.2%2C69.5c-3.2-3.2-8.3-3.2-11.5%2C0L5.4%2C197.3c-3.2%2C3.2-3.2%2C8.3%2C0%2C11.5l11.5%2C11.5c3.2%2C3.2%2C8.3%2C3.2%2C11.5%2C0l124.6-124.6c3.2-3.2%2C8.3-3.2%2C11.5%2C0l124.6%2C124.6c3.2%2C3.2%2C8.3%2C3.2%2C11.5%2C0l11.5-11.5C290.2%2C205.6%2C290.2%2C200.5%2C287%2C197.3z%22%2F%3E%3C%2Fsvg%3E'); /* Custom arrow */
            background-repeat: no-repeat;
            background-position: right 0.8rem top 50%;
            background-size: 0.6em auto;
            cursor: pointer;
        }

        .mode-selection select:focus, .param-selection select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(255, 77, 0, 0.3);
        }

        .input-group {
            margin-bottom: 1.5rem;
            text-align: left;
        }

        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 400;
            color: var(--light-gray);
        }

        .input-group input[type="number"] {
            width: 100%;
            padding: 0.8rem 1rem;
            border-radius: 8px;
            border: 1px solid var(--medium-gray);
            background: var(--dark);
            color: var(--white);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .input-group input[type="number"]:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(255, 77, 0, 0.3);
        }

        .input-group input[type="number"]:disabled {
            background: var(--medium-gray);
            cursor: not-allowed;
            opacity: 0.7;
        }

        .calculate-btn {
            background: var(--primary);
            color: var(--white);
            padding: 1rem 2.5rem;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 77, 0, 0.3);
            margin-top: 1rem;
        }

        .calculate-btn:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 77, 0, 0.4);
        }

        .result-area {
            margin-top: 2.5rem;
            padding: 1.5rem;
            background: rgba(255, 77, 0, 0.1);
            border: 1px solid var(--primary);
            border-radius: 12px;
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--primary);
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-shadow: 0 0 5px rgba(255, 77, 0, 0.5);
            word-break: break-all; /* Ensure long results wrap */
        }

        .result-area.error {
            background: rgba(255, 0, 0, 0.1);
            border-color: #ff0000;
            color: #ff0000;
            text-shadow: 0 0 5px rgba(255, 0, 0, 0.5);
        }

        .note {
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.6);
            margin-top: 1rem;
            text-align: left;
        }

        /* Initially hide all mode-specific input sections and parameter selection */
        .param-selection-container, .conduction-inputs, .convection-inputs, .radiation-inputs, .overall-coeff-inputs {
            display: none;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .sidebar {
                width: 280px;
                left: -280px;
            }
            
            .main-content.sidebar-active {
                margin-left: 280px;
            }
            
            .menu-btn {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
            
            .section {
                padding: 4rem 0;
            }
            
            .calculator-card {
                padding: 2rem;
                margin: 2rem auto;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar Navigation -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h1 class="logo">HEAT HUB</h1>
            <button class="close-btn"><i class="fas fa-times"></i></button>
        </div>
        <ul class="sidebar-menu">
            <li><a href="HT.html"><i class="fas fa-home"></i> Home</a></li>
            <li><a href="register.html"><i class="fas fa-user-plus"></i> Register</a></li>
            <li><a href="AR/front.html"><i class="fas fa-cube"></i> AR Models</a></li>
            <li><a href="profile.html"><i class="fas fa-user"></i> Profile</a></li>
            <li><a href="tutorials.html"><i class="fas fa-book"></i> Tutorials</a></li>
            <li><a href="research_papers.html"><i class="fas fa-flask"></i> Research Papers</a></li>
            <li><a href="#" class="active"><i class="fas fa-calculator"></i> Calculators</a></li> <!-- Marked as active -->
            <li><a href="#"><i class="fas fa-envelope"></i> Contact</a></li>
        </ul>
        <div class="sidebar-footer">
            <div class="search-box">
                <input type="text" placeholder="Search..." class="search-input">
                <button class="search-btn"><i class="fas fa-search"></i></button>
            </div>
            <div class="social-links">
                <a href="#"><i class="fab fa-facebook"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-linkedin"></i></a>
                <a href="#"><i class="fab fa-youtube"></i></a>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Menu Button -->
        <button class="menu-btn"><i class="fas fa-bars"></i></button>

        <!-- Page Header -->
        <section class="section">
            <div class="container">
                <div class="section-header fade-in">
                    <h2>Heat Transfer Calculator</h2>
                    <p class="delay-1">Calculate any missing parameter for Conduction, Convection, Radiation, and Overall Heat Transfer Coefficient</p>
                </div>
            </div>
        </section>

        <!-- Calculator Card -->
        <section class="section" style="background: rgba(10, 10, 10, 0.5); padding-top: 0; padding-bottom: 0;">
            <div class="container">
                <div class="calculator-card fade-in delay-1">
                    <h3>Heat Transfer Calculation</h3>

                    <div class="mode-selection">
                        <label for="heatMode">Choose a mode:</label>
                        <select id="heatMode">
                            <option value="">-- Select a Mode --</option>
                            <option value="conduction">Conduction</option>
                            <option value="convection">Convection</option>
                            <option value="radiation">Radiation</option>
                            <option value="overall_coeff">Overall Heat Transfer Coefficient (U)</option>
                        </select>
                    </div>

                    <!-- Parameter to Calculate Selection (initially hidden) -->
                    <div id="paramSelectionContainer" class="param-selection-container">
                        <label for="paramToCalculate">Calculate:</label>
                        <select id="paramToCalculate">
                            <!-- Options will be populated by JavaScript -->
                        </select>
                    </div>

                    <!-- Conduction Inputs -->
                    <div id="conductionInputs" class="conduction-inputs">
                        <div class="input-group">
                            <label for="Q_conduction">Heat Transfer Rate (Q) [W]:</label>
                            <input type="number" id="Q_conduction" placeholder="e.g., 100">
                        </div>
                        <div class="input-group">
                            <label for="conductivity">Thermal Conductivity (k) [W/(m·K)]:</label>
                            <input type="number" id="conductivity" placeholder="e.g., 0.026 (air)">
                        </div>
                        <div class="input-group">
                            <label for="areaConduction">Area (A) [m²]:</label>
                            <input type="number" id="areaConduction" placeholder="e.g., 1">
                        </div>
                        <div class="input-group">
                            <label for="temp1">Temperature 1 (T₁) [°C or K]:</label>
                            <input type="number" id="temp1" placeholder="e.g., 100">
                        </div>
                        <div class="input-group">
                            <label for="temp2">Temperature 2 (T₂) [°C or K]:</label>
                            <input type="number" id="temp2" placeholder="e.g., 20">
                        </div>
                        <div class="input-group">
                            <label for="thickness">Thickness (L) [m]:</label>
                            <input type="number" id="thickness" placeholder="e.g., 0.1">
                        </div>
                        <p class="note">Note: Ensure consistent units for temperature (either all °C or all K).</p>
                    </div>

                    <!-- Convection Inputs -->
                    <div id="convectionInputs" class="convection-inputs">
                        <div class="input-group">
                            <label for="Q_convection">Heat Transfer Rate (Q) [W]:</label>
                            <input type="number" id="Q_convection" placeholder="e.g., 50">
                        </div>
                        <div class="input-group">
                            <label for="convectionCoeff">Convection Coefficient (h) [W/(m²·K)]:</label>
                            <input type="number" id="convectionCoeff" placeholder="e.g., 10 (air)">
                        </div>
                        <div class="input-group">
                            <label for="areaConvection">Area (A) [m²]:</label>
                            <input type="number" id="areaConvection" placeholder="e.g., 1">
                        </div>
                        <div class="input-group">
                            <label for="surfaceTemp">Surface Temperature (T_s) [°C or K]:</label>
                            <input type="number" id="surfaceTemp" placeholder="e.g., 80">
                        </div>
                        <div class="input-group">
                            <label for="fluidTemp">Fluid Temperature (T_∞) [°C or K]:</label>
                            <input type="number" id="fluidTemp" placeholder="e.g., 25">
                        </div>
                        <p class="note">Note: Ensure consistent units for temperature (either all °C or all K).</p>
                    </div>

                    <!-- Radiation Inputs -->
                    <div id="radiationInputs" class="radiation-inputs">
                        <div class="input-group">
                            <label for="Q_radiation">Heat Transfer Rate (Q) [W]:</label>
                            <input type="number" id="Q_radiation" placeholder="e.g., 20">
                        </div>
                        <div class="input-group">
                            <label for="emissivity">Emissivity (ε) [0-1]:</label>
                            <input type="number" id="emissivity" step="0.01" min="0" max="1" placeholder="e.g., 0.9 (dull surface)">
                        </div>
                        <div class="input-group">
                            <label for="areaRadiation">Area (A) [m²]:</label>
                            <input type="number" id="areaRadiation" placeholder="e.g., 1">
                        </div>
                        <div class="input-group">
                            <label for="surfaceTempRad">Surface Temperature (T_s) [K]:</label>
                            <input type="number" id="surfaceTempRad" placeholder="e.g., 353 (80°C + 273.15)">
                        </div>
                        <div class="input-group">
                            <label for="surroundingTempRad">Surrounding Temperature (T_sur) [K]:</label>
                            <input type="number" id="surroundingTempRad" placeholder="e.g., 298 (25°C + 273.15)">
                        </div>
                        <p class="note">Important: All temperatures for Radiation MUST be in Kelvin (K).</p>
                    </div>

                    <!-- Overall Heat Transfer Coefficient Inputs -->
                    <div id="overallCoeffInputs" class="overall-coeff-inputs">
                        <div class="input-group">
                            <label for="Q_overall">Heat Transfer Rate (Q) [W]:</label>
                            <input type="number" id="Q_overall" placeholder="e.g., 150">
                        </div>
                        <div class="input-group">
                            <label for="U_overall">Overall Heat Transfer Coefficient (U) [W/(m²·K)]:</label>
                            <input type="number" id="U_overall" placeholder="e.g., 5">
                        </div>
                        <div class="input-group">
                            <label for="A_overall">Area (A) [m²]:</label>
                            <input type="number" id="A_overall" placeholder="e.g., 1.5">
                        </div>
                        <div class="input-group">
                            <label for="Thot_overall">Hot Side Temperature (T_hot) [°C or K]:</label>
                            <input type="number" id="Thot_overall" placeholder="e.g., 120">
                        </div>
                        <div class="input-group">
                            <label for="Tcold_overall">Cold Side Temperature (T_cold) [°C or K]:</label>
                            <input type="number" id="Tcold_overall" placeholder="e.g., 30">
                        </div>
                        <p class="note">Note: Ensure consistent units for temperature (either all °C or all K).</p>
                    </div>

                    <button id="calculateBtn" class="calculate-btn">Calculate</button>

                    <div id="resultArea" class="result-area">
                        Result will appear here
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="fade-in">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-column">
                        <h3>Explore</h3>
                        <ul class="footer-links">
                            <li class="footer-link"><a href="flowchart.html">Flow Chart</a></li>
                            <li class="footer-link"><a href="problemsolving.html">Problem Solving</a></li>
                            <li class="footer-link"><a href="AR/front.html">AR Models</a></li>
                            <li class="footer-link"><a href="research_papers.html">Research Papers</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h3>Resources</h3>
                        <ul class="footer-links">
                            <li class="footer-link"><a href="tutorials.html">Tutorials</a></li>
                            <li class="footer-link"><a href="#">Calculators</a></li>
                            <li class="footer-link"><a href="#">Case Studies</a></li>
                            <li class="footer-link"><a href="#">Glossary</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h3>Connect</h3>
                        <ul class="footer-links">
                            <li class="footer-link"><a href="#">Contact Us</a></li>
                            <li class="footer-link"><a href="#">Contribute</a></li>
                            <li class="footer-link"><a href="#">Feedback</a></li>
                            <li class="footer-link"><a href="#">Careers</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="copyright">
                    <p>&copy; 2025 HEAT HUB | All Rights Reserved</p>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Sidebar functionality (copied from other pages)
        const menuBtn = document.querySelector('.menu-btn');
        const closeBtn = document.querySelector('.close-btn');
        const sidebar = document.querySelector('.sidebar');
        const mainContent = document.querySelector('.main-content');

        menuBtn.addEventListener('click', () => {
            sidebar.classList.add('active');
            mainContent.classList.add('sidebar-active');
        });

        closeBtn.addEventListener('click', () => {
            sidebar.classList.remove('active');
            mainContent.classList.remove('sidebar-active');
        });

        document.addEventListener('click', (e) => {
            if (!sidebar.contains(e.target) && e.target !== menuBtn && !menuBtn.contains(e.target)) {
                sidebar.classList.remove('active');
                mainContent.classList.remove('sidebar-active');
            }
        });

        // Add loaded class for animations (copied from other pages)
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                document.body.classList.add('loaded');
            }, 300);
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate');
                    }
                });
            }, { threshold: 0.1 });
            
            document.querySelectorAll('.fade-in').forEach(el => {
                observer.observe(el);
            });
        });

        // ========== CALCULATOR LOGIC ==========
        const heatModeSelect = document.getElementById('heatMode');
        const paramSelectionContainer = document.getElementById('paramSelectionContainer');
        const paramToCalculateSelect = document.getElementById('paramToCalculate');

        const conductionInputs = document.getElementById('conductionInputs');
        const convectionInputs = document.getElementById('convectionInputs');
        const radiationInputs = document.getElementById('radiationInputs');
        const overallCoeffInputs = document.getElementById('overallCoeffInputs'); // New

        const calculateBtn = document.getElementById('calculateBtn');
        const resultArea = document.getElementById('resultArea');

        // Input fields for Conduction
        const qConductionInput = document.getElementById('Q_conduction');
        const conductivityInput = document.getElementById('conductivity');
        const areaConductionInput = document.getElementById('areaConduction');
        const temp1Input = document.getElementById('temp1');
        const temp2Input = document.getElementById('temp2');
        const thicknessInput = document.getElementById('thickness');

        // Input fields for Convection
        const qConvectionInput = document.getElementById('Q_convection');
        const convectionCoeffInput = document.getElementById('convectionCoeff');
        const areaConvectionInput = document.getElementById('areaConvection');
        const surfaceTempInput = document.getElementById('surfaceTemp');
        const fluidTempInput = document.getElementById('fluidTemp');

        // Input fields for Radiation
        const qRadiationInput = document.getElementById('Q_radiation');
        const emissivityInput = document.getElementById('emissivity');
        const areaRadiationInput = document.getElementById('areaRadiation');
        const surfaceTempRadInput = document.getElementById('surfaceTempRad');
        const surroundingTempRadInput = document.getElementById('surroundingTempRad');

        // Input fields for Overall Heat Transfer Coefficient (New)
        const qOverallInput = document.getElementById('Q_overall');
        const UOverallInput = document.getElementById('U_overall');
        const AOverallInput = document.getElementById('A_overall');
        const ThotOverallInput = document.getElementById('Thot_overall');
        const TcoldOverallInput = document.getElementById('Tcold_overall');

        // Stefan-Boltzmann constant
        const STEFAN_BOLTZMANN_CONSTANT = 5.67e-8; // W/(m^2 * K^4)

        // Maps for parameters and their units
        const conductionParams = {
            'Q': { label: 'Heat Transfer Rate (Q)', unit: 'W', input: qConductionInput },
            'k': { label: 'Thermal Conductivity (k)', unit: 'W/(m·K)', input: conductivityInput },
            'A': { label: 'Area (A)', unit: 'm²', input: areaConductionInput },
            'T1': { label: 'Temperature 1 (T₁)', unit: '°C or K', input: temp1Input },
            'T2': { label: 'Temperature 2 (T₂)', unit: '°C or K', input: temp2Input },
            'L': { label: 'Thickness (L)', unit: 'm', input: thicknessInput }
        };

        const convectionParams = {
            'Q': { label: 'Heat Transfer Rate (Q)', unit: 'W', input: qConvectionInput },
            'h': { label: 'Convection Coefficient (h)', unit: 'W/(m²·K)', input: convectionCoeffInput },
            'A': { label: 'Area (A)', unit: 'm²', input: areaConvectionInput },
            'Ts': { label: 'Surface Temperature (T_s)', unit: '°C or K', input: surfaceTempInput },
            'Tinf': { label: 'Fluid Temperature (T_∞)', unit: '°C or K', input: fluidTempInput }
        };

        const radiationParams = {
            'Q': { label: 'Heat Transfer Rate (Q)', unit: 'W', input: qRadiationInput },
            'epsilon': { label: 'Emissivity (ε)', unit: '', input: emissivityInput },
            'A': { label: 'Area (A)', unit: 'm²', input: areaRadiationInput },
            'Ts': { label: 'Surface Temperature (T_s)', unit: 'K', input: surfaceTempRadInput },
            'Tsur': { label: 'Surrounding Temperature (T_sur)', unit: 'K', input: surroundingTempRadInput }
        };

        // New: Overall Heat Transfer Coefficient Parameters
        const overallCoeffParams = {
            'Q': { label: 'Heat Transfer Rate (Q)', unit: 'W', input: qOverallInput },
            'U': { label: 'Overall Heat Transfer Coefficient (U)', unit: 'W/(m²·K)', input: UOverallInput },
            'A': { label: 'Area (A)', unit: 'm²', input: AOverallInput },
            'Thot': { label: 'Hot Side Temperature (T_hot)', unit: '°C or K', input: ThotOverallInput },
            'Tcold': { label: 'Cold Side Temperature (T_cold)', unit: '°C or K', input: TcoldOverallInput }
        };


        // Function to populate "Calculate" dropdown and show/hide input sections
        function showModeInputs() {
            const selectedMode = heatModeSelect.value;
            // Hide all input sections
            conductionInputs.style.display = 'none';
            convectionInputs.style.display = 'none';
            radiationInputs.style.display = 'none';
            overallCoeffInputs.style.display = 'none'; // Hide new section

            paramSelectionContainer.style.display = 'none';
            paramToCalculateSelect.innerHTML = '<option value="">-- Select Parameter to Calculate --</option>';
            resultArea.textContent = 'Result will appear here';
            resultArea.classList.remove('error');

            let currentParams = {};

            if (selectedMode === 'conduction') {
                conductionInputs.style.display = 'block';
                currentParams = conductionParams;
            } else if (selectedMode === 'convection') {
                convectionInputs.style.display = 'block';
                currentParams = convectionParams;
            } else if (selectedMode === 'radiation') {
                radiationInputs.style.display = 'block';
                currentParams = radiationParams;
            } else if (selectedMode === 'overall_coeff') { // New mode
                overallCoeffInputs.style.display = 'block';
                currentParams = overallCoeffParams;
            }

            if (selectedMode) {
                paramSelectionContainer.style.display = 'block';
                for (const key in currentParams) {
                    const option = document.createElement('option');
                    option.value = key;
                    option.textContent = currentParams[key].label;
                    paramToCalculateSelect.appendChild(option);
                }
            }
            updateInputFields(); // Call to update input states based on initial selection
        }

        // Function to enable/disable input fields based on selected parameter
        function updateInputFields() {
            const selectedMode = heatModeSelect.value;
            const paramToCalc = paramToCalculateSelect.value;

            let inputsToManage = [];
            if (selectedMode === 'conduction') {
                inputsToManage = [qConductionInput, conductivityInput, areaConductionInput, temp1Input, temp2Input, thicknessInput];
            } else if (selectedMode === 'convection') {
                inputsToManage = [qConvectionInput, convectionCoeffInput, areaConvectionInput, surfaceTempInput, fluidTempInput];
            } else if (selectedMode === 'radiation') {
                inputsToManage = [qRadiationInput, emissivityInput, areaRadiationInput, surfaceTempRadInput, surroundingTempRadInput];
            } else if (selectedMode === 'overall_coeff') { // New mode
                inputsToManage = [qOverallInput, UOverallInput, AOverallInput, ThotOverallInput, TcoldOverallInput];
            }

            inputsToManage.forEach(input => {
                input.disabled = false; // Enable all first
                input.classList.remove('error-highlight'); // Remove error highlight
            });

            if (paramToCalc) {
                let paramInput = null;
                if (selectedMode === 'conduction' && conductionParams[paramToCalc]) {
                    paramInput = conductionParams[paramToCalc].input;
                } else if (selectedMode === 'convection' && convectionParams[paramToCalc]) {
                    paramInput = convectionParams[paramToCalc].input;
                } else if (selectedMode === 'radiation' && radiationParams[paramToCalc]) {
                    paramInput = radiationParams[paramToCalc].input;
                } else if (selectedMode === 'overall_coeff' && overallCoeffParams[paramToCalc]) { // New mode
                    paramInput = overallCoeffParams[paramToCalc].input;
                }
                
                if (paramInput) {
                    paramInput.disabled = true; // Disable the input for the parameter being calculated
                    paramInput.value = ''; // Clear its value
                }
            }
            resultArea.textContent = 'Result will appear here';
            resultArea.classList.remove('error');
        }

        // Function to get values and validate
        function getValuesAndValidate(mode, paramToCalc) {
            let values = {};
            let missingInputs = [];
            let error = '';

            const getVal = (inputElement, name) => {
                const val = parseFloat(inputElement.value);
                if (inputElement.disabled) return null; // If disabled, it's the one to calculate
                if (isNaN(val)) {
                    missingInputs.push(name);
                    inputElement.classList.add('error-highlight');
                } else {
                    inputElement.classList.remove('error-highlight');
                }
                return val;
            };

            if (mode === 'conduction') {
                values.Q = getVal(qConductionInput, 'Heat Transfer Rate (Q)');
                values.k = getVal(conductivityInput, 'Thermal Conductivity (k)');
                values.A = getVal(areaConductionInput, 'Area (A)');
                values.T1 = getVal(temp1Input, 'Temperature 1 (T₁)');
                values.T2 = getVal(temp2Input, 'Temperature 2 (T₂)');
                values.L = getVal(thicknessInput, 'Thickness (L)');

                // Specific validations
                if (paramToCalc !== 'L' && values.L === 0) error = 'Thickness (L) cannot be zero for Conduction.';
                if (paramToCalc !== 'k' && values.k <= 0 && paramToCalc !== 'Q') error = 'Thermal Conductivity (k) must be positive.'; // Q can be 0 if deltaT is 0
                if (paramToCalc !== 'A' && values.A <= 0 && paramToCalc !== 'Q') error = 'Area (A) must be positive.'; // Q can be 0 if deltaT is 0
                if (paramToCalc !== 'T1' && paramToCalc !== 'T2' && values.T1 === values.T2 && values.Q !== 0) error = 'Temperatures must be different for heat transfer to occur, or Q must be 0.';
                if (paramToCalc === 'Q' && (values.k <= 0 || values.A <= 0 || values.L <= 0)) error = 'k, A, L must be positive for Q calculation.';

            } else if (mode === 'convection') {
                values.Q = getVal(qConvectionInput, 'Heat Transfer Rate (Q)');
                values.h = getVal(convectionCoeffInput, 'Convection Coefficient (h)');
                values.A = getVal(areaConvectionInput, 'Area (A)');
                values.Ts = getVal(surfaceTempInput, 'Surface Temperature (T_s)');
                values.Tinf = getVal(fluidTempInput, 'Fluid Temperature (T_∞)');

                // Specific validations
                if (paramToCalc !== 'h' && values.h <= 0 && paramToCalc !== 'Q') error = 'Convection Coefficient (h) must be positive.';
                if (paramToCalc !== 'A' && values.A <= 0 && paramToCalc !== 'Q') error = 'Area (A) must be positive.';
                if (paramToCalc !== 'Ts' && paramToCalc !== 'Tinf' && values.Ts === values.Tinf && values.Q !== 0) error = 'Temperatures must be different for heat transfer to occur, or Q must be 0.';
                if (paramToCalc === 'Q' && (values.h <= 0 || values.A <= 0)) error = 'h and A must be positive for Q calculation.';

            } else if (mode === 'radiation') {
                values.Q = getVal(qRadiationInput, 'Heat Transfer Rate (Q)');
                values.epsilon = getVal(emissivityInput, 'Emissivity (ε)');
                values.A = getVal(areaRadiationInput, 'Area (A)');
                values.Ts = getVal(surfaceTempRadInput, 'Surface Temperature (T_s)');
                values.Tsur = getVal(surroundingTempRadInput, 'Surrounding Temperature (T_sur)');

                // Specific validations
                if (paramToCalc !== 'epsilon' && (values.epsilon < 0 || values.epsilon > 1)) error = 'Emissivity (ε) must be between 0 and 1.';
                if (paramToCalc !== 'A' && values.A <= 0 && paramToCalc !== 'Q') error = 'Area (A) must be positive.';
                if (paramToCalc !== 'Ts' && values.Ts < 0) error = 'Surface Temperature (T_s) must be non-negative Kelvin.';
                if (paramToCalc !== 'Tsur' && values.Tsur < 0) error = 'Surrounding Temperature (T_sur) must be non-negative Kelvin.';
                if (paramToCalc !== 'Ts' && paramToCalc !== 'Tsur' && values.Ts === values.Tsur && values.Q !== 0) error = 'Temperatures must be different for heat transfer to occur, or Q must be 0.';
                if (paramToCalc === 'Q' && (values.epsilon < 0 || values.epsilon > 1 || values.A <= 0 || values.Ts < 0 || values.Tsur < 0)) error = 'Emissivity (0-1), Area (>0), and Temperatures (>=0 K) must be valid for Q calculation.';

            } else if (mode === 'overall_coeff') { // New mode validation
                values.Q = getVal(qOverallInput, 'Heat Transfer Rate (Q)');
                values.U = getVal(UOverallInput, 'Overall Heat Transfer Coefficient (U)');
                values.A = getVal(AOverallInput, 'Area (A)');
                values.Thot = getVal(ThotOverallInput, 'Hot Side Temperature (T_hot)');
                values.Tcold = getVal(TcoldOverallInput, 'Cold Side Temperature (T_cold)');

                // Specific validations
                if (paramToCalc !== 'U' && values.U <= 0 && paramToCalc !== 'Q') error = 'Overall Heat Transfer Coefficient (U) must be positive.';
                if (paramToCalc !== 'A' && values.A <= 0 && paramToCalc !== 'Q') error = 'Area (A) must be positive.';
                if (paramToCalc !== 'Thot' && paramToCalc !== 'Tcold' && values.Thot === values.Tcold && values.Q !== 0) error = 'Temperatures must be different for heat transfer to occur, or Q must be 0.';
                if (paramToCalc === 'Q' && (values.U <= 0 || values.A <= 0)) error = 'U and A must be positive for Q calculation.';
            }

            if (missingInputs.length > 0) {
                error = `Missing or invalid inputs: ${missingInputs.join(', ')}.`;
            }

            return { values, error };
        }


        // Function to perform calculation
        function calculateHeatTransfer() {
            const selectedMode = heatModeSelect.value;
            const paramToCalc = paramToCalculateSelect.value;
            let result = null;
            let unit = '';
            let paramLabel = '';

            resultArea.classList.remove('error'); // Clear previous error state

            if (!selectedMode) {
                resultArea.textContent = 'Error: Please select a heat transfer mode.';
                resultArea.classList.add('error');
                return;
            }
            if (!paramToCalc) {
                resultArea.textContent = 'Error: Please select a parameter to calculate.';
                resultArea.classList.add('error');
                return;
            }

            const { values, error } = getValuesAndValidate(selectedMode, paramToCalc);

            if (error) {
                resultArea.textContent = 'Error: ' + error;
                resultArea.classList.add('error');
                return;
            }

            try {
                if (selectedMode === 'conduction') {
                    const { Q, k, A, T1, T2, L } = values;
                    paramLabel = conductionParams[paramToCalc].label;
                    unit = conductionParams[paramToCalc].unit;

                    if (paramToCalc === 'Q') {
                        result = (k * A * (T1 - T2)) / L;
                    } else if (paramToCalc === 'k') {
                        if (A === 0 || (T1 - T2) === 0) throw new Error("Division by zero for k calculation (Area or Temp Difference is zero).");
                        result = (Q * L) / (A * (T1 - T2));
                    } else if (paramToCalc === 'A') {
                        if (k === 0 || (T1 - T2) === 0) throw new Error("Division by zero for A calculation (k or Temp Difference is zero).");
                        result = (Q * L) / (k * (T1 - T2));
                    } else if (paramToCalc === 'T1') {
                        if (k === 0 || A === 0) throw new Error("Division by zero for T1 calculation (k or Area is zero).");
                        result = (Q * L) / (k * A) + T2;
                    } else if (paramToCalc === 'T2') {
                        if (k === 0 || A === 0) throw new Error("Division by zero for T2 calculation (k or Area is zero).");
                        result = T1 - (Q * L) / (k * A);
                    } else if (paramToCalc === 'L') {
                        if (k === 0 || A === 0 || (T1 - T2) === 0) throw new Error("Division by zero for L calculation (k, Area, or Temp Difference is zero).");
                        result = (k * A * (T1 - T2)) / Q;
                    }
                } else if (selectedMode === 'convection') {
                    const { Q, h, A, Ts, Tinf } = values;
                    paramLabel = convectionParams[paramToCalc].label;
                    unit = convectionParams[paramToCalc].unit;

                    if (paramToCalc === 'Q') {
                        result = h * A * (Ts - Tinf);
                    } else if (paramToCalc === 'h') {
                        if (A === 0 || (Ts - Tinf) === 0) throw new Error("Division by zero for h calculation (Area or Temp Difference is zero).");
                        result = Q / (A * (Ts - Tinf));
                    } else if (paramToCalc === 'A') {
                        if (h === 0 || (Ts - Tinf) === 0) throw new Error("Division by zero for A calculation (h or Temp Difference is zero).");
                        result = Q / (h * (Ts - Tinf));
                    } else if (paramToCalc === 'Ts') {
                        if (h === 0 || A === 0) throw new Error("Division by zero for Ts calculation (h or Area is zero).");
                        result = Q / (h * A) + Tinf;
                    } else if (paramToCalc === 'Tinf') {
                        if (h === 0 || A === 0) throw new Error("Division by zero for Tinf calculation (h or Area is zero).");
                        result = Ts - Q / (h * A);
                    }
                } else if (selectedMode === 'radiation') {
                    const { Q, epsilon, A, Ts, Tsur } = values;
                    paramLabel = radiationParams[paramToCalc].label;
                    unit = radiationParams[paramToCalc].unit;
                    
                    if (paramToCalc === 'Q') {
                        result = epsilon * STEFAN_BOLTZMANN_CONSTANT * A * (Math.pow(Ts, 4) - Math.pow(Tsur, 4));
                    } else if (paramToCalc === 'epsilon') {
                        const denominator = STEFAN_BOLTZMANN_CONSTANT * A * (Math.pow(Ts, 4) - Math.pow(Tsur, 4));
                        if (denominator === 0) throw new Error("Division by zero for Emissivity calculation. Check temperatures or area.");
                        result = Q / denominator;
                    } else if (paramToCalc === 'A') {
                        const denominator = epsilon * STEFAN_BOLTZMANN_CONSTANT * (Math.pow(Ts, 4) - Math.pow(Tsur, 4));
                        if (denominator === 0) throw new Error("Division by zero for Area calculation. Check temperatures or emissivity.");
                        result = Q / denominator;
                    } else if (paramToCalc === 'Ts') {
                        if (epsilon === 0 || A === 0) throw new Error("Division by zero for Ts calculation.");
                        const term = Q / (epsilon * STEFAN_BOLTZMANN_CONSTANT * A) + Math.pow(Tsur, 4);
                        if (term < 0) throw new Error("Cannot calculate real surface temperature from given inputs (negative value under root).");
                        result = Math.pow(term, 1/4);
                    } else if (paramToCalc === 'Tsur') {
                        if (epsilon === 0 || A === 0) throw new Error("Division by zero for Tsur calculation.");
                        const term = Math.pow(Ts, 4) - (Q / (epsilon * STEFAN_BOLTZMANN_CONSTANT * A));
                        if (term < 0) throw new Error("Cannot calculate real surrounding temperature from given inputs (negative value under root).");
                        result = Math.pow(term, 1/4);
                    }
                } else if (selectedMode === 'overall_coeff') { // New: Overall Heat Transfer Coefficient Calculation
                    const { Q, U, A, Thot, Tcold } = values;
                    paramLabel = overallCoeffParams[paramToCalc].label;
                    unit = overallCoeffParams[paramToCalc].unit;

                    const deltaT = Thot - Tcold;

                    if (paramToCalc === 'Q') {
                        result = U * A * deltaT;
                    } else if (paramToCalc === 'U') {
                        if (A === 0 || deltaT === 0) throw new Error("Division by zero for U calculation (Area or Temp Difference is zero).");
                        result = Q / (A * deltaT);
                    } else if (paramToCalc === 'A') {
                        if (U === 0 || deltaT === 0) throw new Error("Division by zero for A calculation (U or Temp Difference is zero).");
                        result = Q / (U * deltaT);
                    } else if (paramToCalc === 'Thot') {
                        if (U === 0 || A === 0) throw new Error("Division by zero for T_hot calculation (U or Area is zero).");
                        result = (Q / (U * A)) + Tcold;
                    } else if (paramToCalc === 'Tcold') {
                        if (U === 0 || A === 0) throw new Error("Division by zero for T_cold calculation (U or Area is zero).");
                        result = Thot - (Q / (U * A));
                    }
                }
            } catch (e) {
                resultArea.textContent = 'Error: ' + e.message;
                resultArea.classList.add('error');
                console.error(e);
                return;
            }

            // Display result
            if (result !== null && !isNaN(result)) {
                resultArea.textContent = `${paramLabel}: ${result.toFixed(4)} ${unit}`;
            } else {
                resultArea.textContent = 'Could not calculate. Check inputs.';
                resultArea.classList.add('error');
            }
        }

        // Event Listeners
        heatModeSelect.addEventListener('change', showModeInputs);
        paramToCalculateSelect.addEventListener('change', updateInputFields);
        calculateBtn.addEventListener('click', calculateHeatTransfer);

        // Initialize display on page load
        showModeInputs();
    </script>
</body>
</html>
