<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HEAT HUB | Advanced Heat Transfer Education</title>
    <link rel="icon" href="https://placehold.co/32x32/FF4D00/FFFFFF?text=ðŸ”¥" type="image/png"> <!-- Placeholder for your fire-icon.webp -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Oswald:wght@500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Import Map for Three.js Modules -->
    <script type="importmap">
      {
        "imports": {
          "three": "https://cdnjs.cloudflare.com/ajax/libs/three.js/0.165.0/three.module.min.js",
          "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.165.0/examples/jsm/"
        }
      }
    </script>

    <!-- Three.js Library and Post-processing -->
    <script type="module">
        // Import Three.js and necessary post-processing modules using bare specifiers, resolved by importmap
        import * as THREE from 'three';
        import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
        import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';

        // --- Global Variables ---
        let scene, camera, renderer, composer;
        let atomMesh, nucleusMesh, starfield;
        let orbitingParticles = [];
        const orbitingParticleCount = 50; // Number of "protons/neutrons"
        const clock = new THREE.Clock();
        let scrollSpeedFactor = 1.0; // Global variable to control speed based on scroll

        // Camera control variables
        let isDragging = false;
        let isPinching = false;
        let previousTouchDistance = 0;
        let startX = 0;
        let startY = 0;
        let currentRotationX = 0;
        let currentRotationY = 0;
        let targetRotationX = 0;
        let targetRotationY = 0;
        let zoomLevel = 5; // Initial camera Z position (zoom)
        const minZoom = 2.5;
        const maxZoom = 10;
        const rotationSpeed = 0.005;
        const zoomSpeed = 0.1;

        // Nucleus spark variables
        let sparkTimer = 0;
        const sparkInterval = 3; // seconds between sparks
        const sparkDuration = 0.1; // seconds spark lasts
        const baseEmissiveIntensity = 0.8; // Base intensity for nucleus
        const sparkEmissiveIntensity = 2.5; // Increased intensity during spark

        // Particle trail variables
        const trailLength = 30; // Number of segments in the trail
        const trailHistory = new Map(); // Stores position history for each particle

        // --- Atom Vertex Shader ---
        // Passes position to fragment shader for noise calculation and handles standard transformations.
        const atomVS = `
            varying vec3 vPosition;
            void main() {
                vPosition = position;
                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
            }
        `;

        // --- Atom Fragment Shader ---
        // Creates dynamic "breakages" on the atom's surface by adjusting opacity based on noise.
        // Reveals the internal lava effect.
        const atomFS = `
            uniform float time;
            uniform float opacityFactor; // Overall base opacity of the atom
            uniform vec3 baseColor; // Base color of the atom (snow white)
            uniform vec3 emissiveColor; // Emissive color for subtle glow
            uniform float emissiveIntensity; // Intensity of the emissive glow

            varying vec3 vPosition;

            // Simple noise function (from glsl-utils)
            float hash(float n) { return fract(sin(n) * 43758.5453123); }

            float noise(vec3 p) {
                vec3 ip = floor(p);
                vec3 fp = fract(p);
                fp = fp * fp * (3.0 - 2.0 * fp); // Smoothstep interpolation for smoother noise

                vec2 uv = ip.xy + vec2(hash(ip.z), hash(ip.z + 1.0));
                float a = hash(uv.x + hash(uv.y));
                float b = hash(uv.x + 1.0 + hash(uv.y));
                float c = hash(uv.x + hash(uv.y + 1.0));
                float d = hash(uv.x + 1.0 + hash(uv.y + 1.0));

                return mix(mix(a, b, fp.x), mix(c, d, fp.x), fp.y);
            }

            void main() {
                // Generate multiple layers of noise based on position and time for dynamic breakages
                float n1 = noise(vPosition * 3.0 + time * 0.2); // Base noise layer for large cracks
                float n2 = noise(vPosition * 6.0 - time * 0.1); // Second noise layer for smaller details
                float n3 = noise(vPosition * 10.0 + time * 0.3); // Third noise layer for fine crack patterns

                // Combine noises with different weights to create a complex breakage pattern
                float breakageNoise = (n1 * 0.5 + n2 * 0.3 + n3 * 0.2);

                // Define a threshold for where breakages appear
                float threshold = 0.5; // Lower threshold means more cracks

                // Calculate final opacity: atom is more transparent in "breakage" areas
                float finalOpacity = opacityFactor;
                if (breakageNoise > threshold) {
                    // Smoothly transition to more transparency in the crack areas
                    finalOpacity = mix(opacityFactor, 0.0, smoothstep(threshold, 1.0, breakageNoise));
                    finalOpacity = max(0.0, finalOpacity - (breakageNoise - threshold) * 1.0); // Aggressive transparency for clear cracks
                }

                // Base color of the atom
                vec3 color = baseColor;

                // Add emissive glow, stronger around "breakages" to simulate light from inside
                float glowFactor = smoothstep(0.4, 0.9, breakageNoise); 
                // Use emissiveColor for the glow at the cracks
                color += emissiveColor * emissiveIntensity * glowFactor;

                gl_FragColor = vec4(color, finalOpacity);
            }
        `;

        // --- Lava Shader (Fragment Shader) ---
        // This shader creates a molten, flowing effect for the nucleus.
        const lavaFS = `
            uniform float time;
            uniform vec3 color1;
            uniform vec3 color2;
            uniform vec3 color3; // Added a third color for richer gradients
            uniform float emissiveIntensity; // Added for spark effect
            varying vec3 vPosition; // Added for object-space noise

            // Simple noise function (from glsl-utils)
            float hash(float n) { return fract(sin(n) * 43758.5453123); }

            float noise(vec3 p) {
                vec3 ip = floor(p);
                vec3 fp = fract(p);
                fp = fp * fp * (3.0 - 2.0 * fp); // Smoothstep interpolation

                vec2 uv = ip.xy + vec2(hash(ip.z), hash(ip.z + 1.0));
                float a = hash(uv.x + hash(uv.y));
                float b = hash(uv.x + 1.0 + hash(uv.y));
                float c = hash(uv.x + hash(uv.y + 1.0));
                float d = hash(uv.x + 1.0 + hash(uv.y + 1.0));

                return mix(mix(a, b, fp.x), mix(c, d, fp.x), fp.y);
            }

            void main() {
                // Use vPosition (object-space position) for noise calculation
                float n1 = noise(vPosition * 5.0 + time * 0.5); // Base noise layer
                float n2 = noise(vPosition * 3.0 - time * 0.3); // Second noise layer for complexity
                float n3 = noise(vPosition * 8.0 + time * 0.7); // Third noise layer for fine details

                // Combine noises with different weights
                float combinedNoise = (n1 * 0.6 + n2 * 0.3 + n3 * 0.1);

                // Create a fiery color gradient using three colors
                vec3 finalColor;
                if (combinedNoise < 0.5) {
                    finalColor = mix(color1, color2, combinedNoise * 2.0);
                } else {
                    finalColor = mix(color2, color3, (combinedNoise - 0.5) * 2.0);
                }

                // Add a subtle glow based on noise, amplified by emissiveIntensity
                float glow = smoothstep(0.3, 1.0, combinedNoise); 
                finalColor += finalColor * glow * emissiveIntensity; 

                gl_FragColor = vec4(finalColor, 1.0);
            }
        `;

        // --- Nucleus Vertex Shader ---
        const nucleusVS = `
            varying vec3 vPosition;
            void main() {
                vPosition = position;
                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
            }
        `;

        // --- Initialization ---
        function init() {
            const container = document.getElementById('threejs-background');

            // Scene
            scene = new THREE.Scene();

            // Camera
            camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 100);
            camera.position.z = zoomLevel; // Initial camera Z position
            camera.lookAt(scene.position); // Look at the center

            // Renderer
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(window.innerWidth, window.innerHeight);
            container.appendChild(renderer.domElement);

            // --- Main Atom (Snow White with Colored Breakages) ---
            const atomGeometry = new THREE.SphereGeometry(1.5, 64, 64);
            const atomMaterial = new THREE.ShaderMaterial({
                uniforms: {
                    time: { value: 0.0 },
                    opacityFactor: { value: 0.8 }, // Main atom opacity, allowing lava to show through cracks
                    baseColor: { value: new THREE.Color(0xF0F0F0) }, // Greyish white
                    emissiveColor: { value: new THREE.Color(0xFF8C00) }, // Orange for the glow at breakages
                    emissiveIntensity: { value: 0.15 } // Intensity of the glowing cracks
                },
                vertexShader: atomVS,
                fragmentShader: atomFS,
                transparent: true,
                depthWrite: true, 
                side: THREE.FrontSide 
            });
            atomMesh = new THREE.Mesh(atomGeometry, atomMaterial);
            scene.add(atomMesh);

            // --- Lava Nucleus ---
            const nucleusGeometry = new THREE.SphereGeometry(0.5, 32, 32); // Smaller sphere for the nucleus
            const nucleusMaterial = new THREE.ShaderMaterial({
                uniforms: {
                    time: { value: 0.0 },
                    color1: { value: new THREE.Color(0xFF0000) }, // Deep Red
                    color2: { value: new THREE.Color(0xFF4500) }, // Orange-Red
                    color3: { value: new THREE.Color(0xFFFF00) },  // Bright Yellow for core heat
                    emissiveIntensity: { value: baseEmissiveIntensity } // Base intensity for spark effect
                },
                vertexShader: nucleusVS, // Use the new vertex shader
                fragmentShader: lavaFS,
                blending: THREE.AdditiveBlending, // For glowing effect
                transparent: true,
                depthWrite: false // Nucleus can still be depthWrite:false as it's inside
            });
            nucleusMesh = new THREE.Mesh(nucleusGeometry, nucleusMaterial);
            atomMesh.add(nucleusMesh); // Add nucleus as child of atom so it moves with the atom

            // --- Orbiting Protons/Neutrons (Subtle Orange) ---
            const particleGeometry = new THREE.IcosahedronGeometry(0.08, 0); // Small, simple particles
            const particleMaterial = new THREE.MeshStandardMaterial({
                color: 0xFF4D00, // Primary orange color
                transparent: true,
                opacity: 0.6, // Increased opacity for stronger presence
                depthWrite: true, 
                depthTest: true,  
                emissive: 0xFF4D00, // Emissive color matches base color
                emissiveIntensity: 0.5 // Reduced emissive intensity to remove strong glow
            });

            // Material for the orbit paths
            const orbitPathMaterial = new THREE.LineBasicMaterial({
                color: 0xFF4D00, // Matching the particle color
                transparent: true,
                opacity: 0.2, // More visible path, but not strongly glowing
                depthTest: true, 
                linewidth: 1 
            });

            // Material for particle trails
            const particleTrailMaterial = new THREE.LineBasicMaterial({
                color: 0xFF4D00, // Matching the particle color
                transparent: true,
                opacity: 0.1, // Very subtle trail
                linewidth: 1,
                blending: THREE.AdditiveBlending // For a glowing trail effect
            });


            for (let i = 0; i < orbitingParticleCount; i++) {
                const particle = new THREE.Mesh(particleGeometry, particleMaterial.clone());
                particle.userData.orbitalRadius = 1.8 + Math.random() * 0.7; // Wider range of orbits
                particle.userData.orbitalSpeed = (Math.random() * 0.03 + 0.01) * (Math.random() > 0.5 ? 1 : -1); // Faster and more varied speeds
                particle.userData.orbitalAngle = Math.random() * Math.PI * 2;
                particle.userData.orbitalPlane = new THREE.Vector3(Math.random() - 0.5, Math.random() - 0.5, Math.random() - 0.5).normalize(); // Random orbital plane
                
                // Ensure orbitalAxis is not a zero vector
                let tempAxis = new THREE.Vector3().crossVectors(particle.userData.orbitalPlane, new THREE.Vector3(0, 1, 0));
                if (tempAxis.lengthSq() === 0) { // If cross product with (0,1,0) is zero, plane is (0,1,0) or (0,-1,0)
                    tempAxis.crossVectors(particle.userData.orbitalPlane, new THREE.Vector3(1, 0, 0)); // Use (1,0,0) instead
                }
                particle.userData.orbitalAxis = tempAxis.normalize();

                particle.userData.pulseOffset = Math.random() * Math.PI * 2; // Added pulseOffset
                particle.userData.rotationSpeed = (Math.random() * 0.05 + 0.02) * (Math.random() > 0.5 ? 1 : -1); // Individual rotation speed

                // Initial position based on orbital parameters
                const angle = particle.userData.orbitalAngle;
                const radius = particle.userData.orbitalRadius;
                const tempVec = new THREE.Vector3(Math.cos(angle) * radius, 0, Math.sin(angle) * radius);
                
                if (particle.userData.orbitalAxis.lengthSq() > 0) {
                    tempVec.applyAxisAngle(particle.userData.orbitalAxis, Math.acos(particle.userData.orbitalPlane.dot(new THREE.Vector3(0, 1, 0))));
                }
                particle.position.copy(tempVec);

                atomMesh.add(particle); // Add particles as children of atom
                orbitingParticles.push(particle);

                // Initialize trail history for this particle
                trailHistory.set(particle.uuid, new Array(trailLength).fill(new THREE.Vector3().copy(particle.position)));

                // Create trail line geometry
                const trailGeometry = new THREE.BufferGeometry();
                const positions = new Float32Array(trailLength * 3); // 3 components per vertex (x, y, z)
                trailGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
                const trailLine = new THREE.Line(trailGeometry, particleTrailMaterial.clone());
                atomMesh.add(trailLine);
                particle.userData.trailLine = trailLine; // Store reference to the trail line
                

                // --- Create Orbit Path for this particle ---
                const pathPoints = [];
                const segments = 96; // More segments for smoother circle path
                for (let j = 0; j <= segments; j++) {
                    const pathAngle = (j / segments) * Math.PI * 2;
                    const pathRadius = particle.userData.orbitalRadius;

                    const pX = Math.cos(pathAngle) * pathRadius;
                    const pY = 0;
                    const pZ = Math.sin(pathAngle) * pathRadius;

                    const pathPoint = new THREE.Vector3(pX, pY, pZ);

                    // Apply the same rotation to the path point as the particle's initial position
                    // This aligns the circle with the particle's orbital plane
                    const defaultNormal = new THREE.Vector3(0, 0, 1);
                    const targetNormal = particle.userData.orbitalPlane;
                    const rotationQuaternion = new THREE.Quaternion().setFromUnitVectors(defaultNormal, targetNormal);
                    pathPoint.applyQuaternion(rotationQuaternion);

                    pathPoints.push(pathPoint);
                }

                const orbitPathGeometry = new THREE.BufferGeometry().setFromPoints(pathPoints);
                const orbitPath = new THREE.LineLoop(orbitPathGeometry, orbitPathMaterial);
                atomMesh.add(orbitPath); // Add path as child of atom
            }

            // --- Background Starfield ---
            const starGeometry = new THREE.BufferGeometry();
            const starVertices = [];
            for (let i = 0; i < 10000; i++) {
                const x = (Math.random() - 0.5) * 200;
                const y = (Math.random() - 0.5) * 200;
                const z = (Math.random() - 0.5) * 200;
                starVertices.push(x, y, z);
            }
            starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
            const starMaterial = new THREE.PointsMaterial({ color: 0xFFFFFF, size: 0.1, transparent: true, opacity: 0.8 });
            starfield = new THREE.Points(starGeometry, starMaterial);
            scene.add(starfield);


            // --- Lighting ---
            const ambientLight = new THREE.AmbientLight(0x404040, 2); // Soft ambient light
            scene.add(ambientLight);

            const pointLight = new THREE.PointLight(0xFFFFFF, 1, 100);
            pointLight.position.set(5, 5, 5);
            scene.add(pointLight);

            // --- Post-processing (Bloom Effect) ---
            composer = new EffectComposer(renderer);
            composer.addPass(new RenderPass(scene, camera));

            // --- Event Listeners ---
            window.addEventListener('resize', onWindowResize, false);

            // Mouse events for camera control
            container.addEventListener('mousedown', onMouseDown, false);
            container.addEventListener('mouseup', onMouseUp, false);
            container.addEventListener('mousemove', onMouseMove, false);
            container.addEventListener('wheel', onMouseWheel, false);

            // Touch events for camera control
            container.addEventListener('touchstart', onTouchStart, false);
            container.addEventListener('touchmove', onTouchMove, false);
            container.addEventListener('touchend', onTouchEnd, false);

            // Add scroll event listener to update speed factor
            window.addEventListener('scroll', () => {
                const scrollY = window.scrollY;
                const documentHeight = document.body.scrollHeight - window.innerHeight;
                
                // Calculate scroll percentage, clamp between 0 and 1
                let scrollPercentage = 0;
                if (documentHeight > 0) {
                    scrollPercentage = Math.min(1, Math.max(0, scrollY / documentHeight));
                }

                // Map scroll percentage to a speed factor (e.g., from 1x to 5x speed)
                const minFactor = 1.0;
                const maxFactor = 5.0; // Max speed multiplier
                scrollSpeedFactor = minFactor + scrollPercentage * (maxFactor - minFactor);

                // Apply parallax effect to hero content
                const heroContent = document.querySelector('.hero-content');
                if (heroContent) {
                    heroContent.style.transform = `translateY(${scrollY * 0.2}px)`; // Adjust 0.2 for intensity
                }

                // Show/hide scroll-to-top button
                const scrollToTopBtn = document.getElementById('scrollToTopBtn');
                if (scrollY > 300) { // Show button after scrolling 300px
                    scrollToTopBtn.classList.add('show');
                } else {
                    scrollToTopBtn.classList.remove('show');
                }
            });
        }

        // --- Mouse Event Handlers ---
        function onMouseDown(event) {
            isDragging = true;
            startX = event.clientX;
            startY = event.clientY;
            // Stop automatic rotation when dragging starts
            atomMesh.userData.autoRotate = false; 
        }

        function onMouseUp() {
            isDragging = false;
            // Resume automatic rotation when dragging stops
            atomMesh.userData.autoRotate = true; 
        }

        function onMouseMove(event) {
            if (!isDragging) return;

            const deltaX = event.clientX - startX;
            const deltaY = event.clientY - startY;

            targetRotationY += deltaX * rotationSpeed;
            targetRotationX += deltaY * rotationSpeed;

            startX = event.clientX;
            startY = event.clientY;
        }

        function onMouseWheel(event) {
            event.preventDefault(); // Prevent page scrolling

            zoomLevel -= event.deltaY * zoomSpeed * 0.01; // Adjust zoom speed
            zoomLevel = Math.max(minZoom, Math.min(maxZoom, zoomLevel)); // Clamp zoom level
            camera.position.z = zoomLevel;
        }

        // --- Touch Event Handlers ---
        function getTouchDistance(touches) {
            const dx = touches[0].clientX - touches[1].clientX;
            const dy = touches[0].clientY - touches[1].clientY;
            return Math.sqrt(dx * dx + dy * dy);
        }

        function onTouchStart(event) {
            if (event.touches.length === 1) {
                isDragging = true;
                startX = event.touches[0].clientX;
                startY = event.touches[0].clientY;
                atomMesh.userData.autoRotate = false;
            } else if (event.touches.length === 2) {
                isPinching = true;
                previousTouchDistance = getTouchDistance(event.touches);
                atomMesh.userData.autoRotate = false;
            }
        }

        function onTouchMove(event) {
            event.preventDefault(); // Prevent page scrolling when touching the canvas

            if (isDragging && event.touches.length === 1) {
                const deltaX = event.touches[0].clientX - startX;
                const deltaY = event.touches[0].clientY - startY;

                targetRotationY += deltaX * rotationSpeed * 1.5; // Increased touch rotation sensitivity
                targetRotationX += deltaY * rotationSpeed * 1.5;

                startX = event.touches[0].clientX;
                startY = event.touches[0].clientY;
            } else if (isPinching && event.touches.length === 2) {
                const currentTouchDistance = getTouchDistance(event.touches);
                const zoomDelta = currentTouchDistance - previousTouchDistance;

                zoomLevel -= zoomDelta * zoomSpeed * 0.005; // Adjust touch zoom sensitivity
                zoomLevel = Math.max(minZoom, Math.min(maxZoom, zoomLevel));
                camera.position.z = zoomLevel;

                previousTouchDistance = currentTouchDistance;
            }
        }

        function onTouchEnd() {
            isDragging = false;
            isPinching = false;
            atomMesh.userData.autoRotate = true;
        }


        // --- Animation Loop ---
        function animate() {
            requestAnimationFrame(animate);

            const delta = clock.getDelta();
            const elapsedTime = clock.getElapsedTime();

            // Animate Atom Breakages
            if (atomMesh && atomMesh.material.uniforms) {
                atomMesh.material.uniforms.time.value = elapsedTime;
            }

            // Animate Lava Nucleus and Spark
            if (nucleusMesh && nucleusMesh.material.uniforms) {
                nucleusMesh.material.uniforms.time.value = elapsedTime;

                // Handle nucleus spark effect
                sparkTimer += delta;
                if (sparkTimer >= sparkInterval) {
                    // Start spark
                    nucleusMesh.material.uniforms.emissiveIntensity.value = sparkEmissiveIntensity;
                    sparkTimer = 0; // Reset timer
                } else if (nucleusMesh.material.uniforms.emissiveIntensity.value === sparkEmissiveIntensity && sparkTimer >= sparkDuration) {
                    // End spark
                    nucleusMesh.material.uniforms.emissiveIntensity.value = baseEmissiveIntensity;
                }
            }

            // Animate Orbiting Particles and their trails
            orbitingParticles.forEach(particle => {
                // Apply scrollSpeedFactor to orbital speed
                particle.userData.orbitalAngle += particle.userData.orbitalSpeed * delta * scrollSpeedFactor;

                const angle = particle.userData.orbitalAngle;
                const radius = particle.userData.orbitalRadius;
                
                // Re-calculate position based on orbital parameters
                const tempVec = new THREE.Vector3(Math.cos(angle) * radius, 0, Math.sin(angle) * radius);
                
                // Apply rotation for orbital plane
                const defaultNormal = new THREE.Vector3(0, 0, 1);
                const targetNormal = particle.userData.orbitalPlane;
                const rotationQuaternion = new THREE.Quaternion().setFromUnitVectors(defaultNormal, targetNormal);
                tempVec.applyQuaternion(rotationQuaternion);

                particle.position.copy(tempVec);

                // Update particle trail
                const trailPositions = trailHistory.get(particle.uuid);
                if (trailPositions) {
                    // Shift all positions back
                    for (let i = trailLength - 1; i > 0; i--) {
                        trailPositions[i].copy(trailPositions[i - 1]);
                    }
                    // Add current position to the front
                    trailPositions[0].copy(particle.position);

                    // Update BufferGeometry
                    const positionsArray = particle.userData.trailLine.geometry.attributes.position.array;
                    for (let i = 0; i < trailLength; i++) {
                        positionsArray[i * 3] = trailPositions[i].x;
                        positionsArray[i * 3 + 1] = trailPositions[i].y;
                        positionsArray[i * 3 + 2] = trailPositions[i].z;
                    }
                    particle.userData.trailLine.geometry.attributes.position.needsUpdate = true;

                    // Fade out trail opacity
                    particle.userData.trailLine.material.opacity = 0.1 * (1 - (elapsedTime % 1)); // Simple fading
                }

                // Make particle size pulse
                const scaleFactor = 1.0 + Math.sin(elapsedTime * 6 + particle.userData.pulseOffset * 0.5) * 0.1; // Faster, subtle size pulse
                particle.scale.set(scaleFactor, scaleFactor, scaleFactor);

                // Rotate particle on its own axis
                particle.rotation.x += particle.userData.rotationSpeed * delta;
                particle.rotation.y += particle.userData.rotationSpeed * delta;

                // Subtle pulsing for path opacity
                const pathIndex = atomMesh.children.indexOf(particle) + 1; 
                if (atomMesh.children[pathIndex] && atomMesh.children[pathIndex].isLine) {
                    atomMesh.children[pathIndex].material.opacity = 0.2 + Math.sin(elapsedTime * 4 + particle.userData.pulseOffset) * 0.03; 
                    atomMesh.children[pathIndex].material.needsUpdate = true;
                }
            });

            // Apply interactive camera rotation
            currentRotationY += (targetRotationY - currentRotationY) * 0.1;
            currentRotationX += (targetRotationX - currentRotationX) * 0.1;

            camera.position.x = zoomLevel * Math.sin(currentRotationY) * Math.cos(currentRotationX);
            camera.position.y = zoomLevel * Math.sin(currentRotationX);
            camera.position.z = zoomLevel * Math.cos(currentRotationY) * Math.cos(currentRotationX);
            camera.lookAt(scene.position);

            // Auto-rotate atom if not dragging
            if (atomMesh && atomMesh.userData.autoRotate !== false) {
                atomMesh.rotation.y += 0.008 * scrollSpeedFactor;
                atomMesh.rotation.x += 0.004 * scrollSpeedFactor;
            }

            // Rotate starfield
            if (starfield) {
                starfield.rotation.y += 0.0005;
                starfield.rotation.x += 0.0002;
            }

            // Render the scene with post-processing
            composer.render();
        }

        // --- Event Handlers ---
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            composer.setSize(window.innerWidth, window.innerHeight);
        }

        // Start the Three.js scene once the window is loaded
        window.onload = function () {
            init();
            animate();
        };

    </script>

    <style>
        :root {
            --primary: #FF4D00;
            --primary-light: #FF6A00;
            --secondary: #00B4D8;
            --secondary-light: #00E0FF;
            --dark: #000000;
            --dark-gray: #1A1A1A;
            --medium-gray: #2E2E2E;
            --light-gray: #E0E0E0;
            --white: #FFFFFF;
            --conduction: linear-gradient(135deg, #FF3D3D, #F86F3D, #ECD54D);
            --convection: linear-gradient(135deg, #4ECDC4, #11999E);
            --radiation: linear-gradient(135deg, #904E95, #E96443);
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 126, 61, 0.605);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            --text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            --glow-color: #FF4D00; /* For the Heat Hub title glow */
            --primary-color: #FF4D00; /* Ensure this is defined for the title */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: transparent; /* Make body transparent to show Three.js background */
            color: var(--white);
            line-height: 1.6;
            overflow-x: hidden;
            /* Remove previous radial gradients as Three.js handles background */
        }

        #threejs-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -2; /* Ensure it's behind everything else */
            overflow: hidden;
            background-color: #000; /* Fallback background */
            /* Removed pointer-events: none; to allow interaction with the canvas */
        }

        #threejs-background::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, transparent 0%, rgba(0, 0, 0, 0.7) 70%, rgba(0, 0, 0, 0.9) 100%);
            z-index: -1; /* Place it above the canvas but below content */
            pointer-events: none; /* Ensure it doesn't block clicks */
        }

        h1, h2, h3, h4 {
            font-weight: 700;
            line-height: 1.2;
        }

        h1 {
            font-size: clamp(2.5rem, 8vw, 4.5rem);
        }

        h2 {
            font-size: clamp(1.8rem, 5vw, 3rem);
            font-family: 'Oswald', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        h3 {
            font-size: clamp(1.5rem, 4vw, 2rem);
        }

        p {
            font-size: clamp(1rem, 2vw, 1.1rem);
            color: rgba(255, 255, 255, 0.8);
        }

        /* ========== LAYOUT & CONTAINERS ========== */
        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .section {
            padding: 6rem 0;
            position: relative;
            /* Adjusted opacity for better visibility of 3D background */
            background: rgba(10, 10, 10, 0.6); /* Slightly increased opacity for content readability */
            border-bottom: 1px solid var(--glass-border);
        }

        .section-header {
            margin-bottom: 3rem;
            text-align: center;
            position: relative;
        }

        .section-header::after {
            content: '';
            display: block;
            width: 100px;
            height: 4px;
            background: var(--primary);
            margin: 1.5rem auto 0;
            border-radius: 2px;
        }

        /* ========== HEADER & NAVIGATION ========== */
        header {
            position: relative;
            padding: 2rem 0;
            /* Adjusted opacity for better visibility of 3D background */
            background: rgba(10, 10, 10, 0.6); /* Slightly increased opacity */
            border-bottom: 1px solid var(--glass-border);
            z-index: 100;
        }

        .header-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
        }

        .logo {
            font-family: 'Oswald', sans-serif;
            font-weight: 700;
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: var(--text-shadow);
            letter-spacing: 2px;
            position: relative;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .tagline {
            font-style: italic;
            max-width: 800px;
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
            position: relative;
        }

        .tagline::before, .tagline::after {
            content: '"';
            color: var(--primary);
            font-size: 1.5em;
        }

        nav {
            width: 100%;
        }

        .navbar {
            display: flex;
            justify-content: center;
            gap: 1rem;
            list-style: none;
        }

        .nav-item {
            position: relative;
        }

        .nav-link {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            color: var(--white);
            text-decoration: none;
            font-weight: 500;
            border-radius: 50px;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            transition: all 0.3s ease;
            overflow: hidden; /* For underline effect */
            position: relative;
            backdrop-filter: blur(8px); /* Glassmorphism effect */
            -webkit-backdrop-filter: blur(8px); /* Safari support */
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: width 0.3s ease-out;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .nav-link:hover {
            background: rgba(255, 77, 0, 0.2);
            color: var(--white);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 77, 0, 0.2);
            text-shadow: 0 0 5px var(--primary); /* Subtle text glow */
        }
        .nav-link:active { /* Added active state for click feedback */
            transform: scale(0.95);
        }

        .search-box {
            width: 100%;
            max-width: 500px;
            margin: 1rem auto 0;
            position: relative;
        }

        .search-input {
            flex: 1;
            padding: 0.8rem 1rem;
            border: 1px solid var(--medium-gray);
            background: var(--dark);
            color: var(--white);
            border-radius: 5px 0 0 5px;
            outline: none;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .search-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 8px var(--primary);
        }

        .search-btn {
            padding: 0 1rem;
            background: var(--primary);
            color: var(--white);
            border: none;
            border-radius: 0 5px 5px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            background: var(--primary-light);
        }
        .search-btn:active { /* Added active state for click feedback */
            transform: scale(0.95);
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .social-links a {
            color: rgba(255, 255, 255, 0.6);
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .social-links a:hover {
            color: var(--primary);
        }

        /* ========== HERO SECTION ========== */
        .hero {
            min-height: 80vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            overflow: hidden;
            background: transparent; /* Ensure hero section background is transparent */
        }

        .hero-content {
            max-width: 800px;
            position: relative;
            z-index: 2;
            transition: transform 0.1s ease-out; /* Smooth parallax effect */
            margin: 0 auto; /* Explicitly center the block itself */
        }

        .hero-title {
            font-size: clamp(2.5rem, 8vw, 4.5rem);
            margin-bottom: 1.5rem;
            background: linear-gradient(90deg, var(--white), var(--light-gray));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .hero-subtitle {
            font-size: clamp(1.2rem, 3vw, 1.5rem);
            margin-bottom: 2rem;
            color: rgba(255, 255, 255, 0.8);
        }

        /* ========== MODES SECTION ========== */
        .modes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .mode-card {
            position: relative;
            border-radius: 20px;
            overflow: hidden;
            height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 2rem;
            color: var(--white);
            transition: all 0.5s cubic-bezier(0.22, 1, 0.36, 1), box-shadow 0.3s ease, border-color 0.3s ease; /* Added border-color transition */
            box-shadow: var(--shadow);
            isolation: isolate;
            border: 1px solid transparent; /* Base transparent border for glow effect */
            backdrop-filter: blur(8px); /* Glassmorphism effect */
            -webkit-backdrop-filter: blur(8px); /* Safari support */
        }

        .mode-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent 50%);
            z-index: -1;
        }

        .mode-card.conduction {
            background: var(--conduction);
        }

        .mode-card.convection {
            background: var(--convection);
        }

        .mode-card.radiation {
            background: var(--radiation);
        }

        .mode-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 0 20px var(--primary), 0 20px 40px rgba(0, 0, 0, 0.4); /* Glowing shadow on hover */
            border-color: var(--primary); /* Glowing border */
        }

        .mode-title {
            font-size: 2rem;
            margin-bottom: 1rem;
            text-shadow: var(--text-shadow);
        }

        .mode-description {
            margin-bottom: 1.5rem;
            opacity: 0.9;
        }

        .mode-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--white);
            text-decoration: none;
            font-weight: 600;
            padding: 0.8rem 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            transition: all 0.3s ease;
            align-self: flex-start;
        }

        .mode-link:hover {
            background: rgba(255, 255, 255, 0.2);
            color: var(--white); /* Keep color white on hover */
            transform: translateX(5px);
            text-shadow: 0 0 5px var(--primary); /* Subtle text glow */
        }
        .mode-link:active { /* Added active state for click feedback */
            transform: scale(0.95);
        }

        /* ========== APPLICATIONS SECTION ========== */
        .applications-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 3rem;
        }

        .app-card {
            background: var(--dark-gray);
            border-radius: 12px;
            padding: 2rem;
            transition: all 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease; /* Added border-color transition */
            border: 1px solid transparent; /* Base transparent border for glow effect */
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(8px); /* Glassmorphism effect */
            -webkit-backdrop-filter: blur(8px); /* Safari support */
        }

        .app-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.03), transparent);
            z-index: -1;
        }

        .app-card:hover {
            transform: translateY(-5px) scale(1.01); /* Subtle lift */
            box-shadow: 0 0 15px var(--primary), 0 10px 30px rgba(0, 0, 0, 0.3); /* Glowing shadow on hover */
            border-color: var(--primary); /* Glowing border */
        }

        .app-card h3 {
            color: var(--white);
            margin-bottom: 1rem;
            position: relative;
            display: inline-block;
        }

        .app-card h3::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 40px;
            height: 2px;
            background: var(--primary);
        }

        /* ========== ABOUT SECTION ========== */
        .about-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .founder-highlight {
            color: var(--primary);
            font-weight: 600;
        }

        /* ========== FOOTER ========== */
        footer {
            background: var(--dark-gray);
            padding: 4rem 0 2rem;
            border-top: 1px solid var(--glass-border);
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .footer-column h3 {
            color: var(--white);
            margin-bottom: 1.5rem;
            position: relative;
            padding-bottom: 0.5rem;
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 2px;
            background: var(--primary);
        }

        .footer-links {
            list-style: none;
        }

        .footer-link {
            margin-bottom: 0.8rem;
        }

        .footer-link a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: color 0.3s ease;
            overflow: hidden; /* For underline effect */
            position: relative;
            display: inline-block; /* Needed for pseudo-element to work correctly */
        }

        .footer-link a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: width 0.3s ease-out;
        }

        .footer-link a:hover::after {
            width: 100%;
        }

        .footer-link a:hover {
            color: var(--primary);
            text-shadow: 0 0 5px var(--primary); /* Subtle text glow */
        }

        .copyright {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid var(--glass-border);
            color: rgba(255, 255, 255, 0.5);
        }

        /* ========== ANIMATIONS ========== */
        /* General fade-in and slide-up for sections and cards */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(50px) scale(0.95); } 
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        /* Specific fadeIn for section headers with letter-spacing */
        @keyframes fadeInHeader {
            from { opacity: 0; transform: translateY(50px); letter-spacing: 10px; }
            to { opacity: 1; transform: translateY(0); letter-spacing: 1px; }
        }

        /* Specific fadeIn for mode cards with rotation */
        @keyframes fadeInModeCard {
            from { opacity: 0; transform: translateY(50px) scale(0.95) rotateY(15deg); }
            to { opacity: 1; transform: translateY(0) scale(1) rotateY(0deg); }
        }

        .fade-in {
            animation: fadeIn 1s cubic-bezier(0.23, 1, 0.32, 1) forwards; 
            opacity: 0; /* Ensure elements are hidden before animation */
        }

        .section-header.animate {
            animation: fadeInHeader 1s cubic-bezier(0.23, 1, 0.32, 1) forwards;
        }
        .mode-card.animate {
            animation: fadeInModeCard 1s cubic-bezier(0.23, 1, 0.32, 1) forwards;
        }


        /* Animation for sidebar links (slide from left) */
        @keyframes animate-from-left {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .animate-from-left {
            animation: animate-from-left 0.6s cubic-bezier(0.23, 1, 0.32, 1) forwards;
            opacity: 0; /* Hidden initially */
        }

        /* Menu button initial animation */
        @keyframes menuButtonScaleIn {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        .menu-btn.animate {
            animation: menuButtonScaleIn 0.5s cubic-bezier(0.23, 1, 0.32, 1) forwards;
        }


        /* Staggered delays for various elements */
        .delay-0 { animation-delay: 0s; }
        .delay-1 { animation-delay: 0.2s; }
        .delay-2 { animation-delay: 0.4s; }
        .delay-3 { animation-delay: 0.6s; }
        .delay-4 { animation-delay: 0.8s; } 
        .delay-5 { animation-delay: 1.0s; } 
        .delay-6 { animation-delay: 1.2s; } 
        .delay-7 { animation-delay: 1.4s; }


        /* ========== SIDEBAR STYLES ========== */
        .sidebar {
            position: fixed;
            top: 0;
            left: -350px;
            width: 350px;
            height: 100vh;
            background: var(--dark-gray);
            border-right: 1px solid var(--glass-border);
            z-index: 1000;
            transition: all 0.3s ease;
            overflow-y: auto;
            box-shadow: 5px 0 15px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px); /* Glassmorphism effect */
            -webkit-backdrop-filter: blur(10px); /* Safari support */
        }

        .sidebar.active {
            left: 0;
        }

        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            border-bottom: 1px solid var(--glass-border);
        }

        .sidebar-header .logo {
            font-size: 1.5rem;
            margin: 0;
        }

        .close-btn {
            background: transparent;
            border: none;
            color: var(--white);
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            color: var(--primary);
            transform: rotate(90deg);
        }
        .close-btn:active { 
            transform: rotate(90deg) scale(0.9);
        }

        .sidebar-menu {
            list-style: none;
            padding: 1rem 0;
        }

        .sidebar-menu li a {
            display: flex;
            align-items: center;
            padding: 1rem 1.5rem;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: all 0.3s ease;
            overflow: hidden; /* For underline effect */
            position: relative;
        }

        .sidebar-menu li a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: width 0.3s ease-out;
        }

        .sidebar-menu li a:hover::after {
            width: 100%;
        }

        .sidebar-menu li a i {
            margin-right: 1rem;
            width: 20px;
            text-align: center;
        }

        .sidebar-menu li a:hover {
            background: rgba(255, 255, 255, 0.05);
            color: var(--white);
            padding-left: 2rem;
            text-shadow: 0 0 5px var(--primary); /* Subtle text glow */
        }

        .sidebar-menu li a.active {
            background: rgba(255, 77, 0, 0.1);
            color: var(--primary);
            border-left: 3px solid var(--primary);
        }

        .sidebar-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--glass-border);
        }

        .search-box {
            display: flex;
            margin-bottom: 1.5rem;
        }

        .search-input {
            flex: 1;
            padding: 0.8rem 1rem;
            border: 1px solid var(--medium-gray);
            background: var(--dark);
            color: var(--white);
            border-radius: 5px 0 0 5px;
            outline: none;
        }

        .search-btn {
            padding: 0 1rem;
            background: var(--primary);
            color: var(--white);
            border: none;
            border-radius: 0 5px 5px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            background: var(--primary-light);
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .social-links a {
            color: rgba(255, 255, 255, 0.6);
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .social-links a:hover {
            color: var(--primary);
        }

        /* ========== MAIN CONTENT ========== */
        .main-content {
            transition: all 0.3s ease;
            position: relative; /* Establish stacking context */
            z-index: 1; /* Ensure content is above Three.js background */
        }

        .main-content.sidebar-active {
            margin-left: 350px;
        }

        .menu-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--primary);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            z-index: 999;
            box-shadow: 0 4px 15px rgba(255, 77, 0, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .menu-btn:hover {
            background: var(--primary-light);
            transform: scale(1.1);
        }
        .menu-btn:active { 
            transform: scale(0.95);
        }

        /* Scroll to Top Button */
        #scrollToTopBtn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
            z-index: 998; /* Below menu button but above content */
            box-shadow: 0 4px 15px rgba(255, 77, 0, 0.3);
        }

        #scrollToTopBtn.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        #scrollToTopBtn:hover {
            background-color: var(--primary-light);
            transform: translateY(-3px);
        }
        #scrollToTopBtn:active {
            transform: scale(0.95);
        }


        /* ========== RESPONSIVE ADJUSTMENTS ========== */
        @media (max-width: 768px) {
            .sidebar {
                width: 280px;
                left: -280px;
            }
            
            .main-content.sidebar-active {
                margin-left: 280px;
            }
            
            .menu-btn {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
            
            .section {
                padding: 4rem 0;
            }
            
            .modes-grid {
                grid-template-columns: 1fr;
            }
            
            .mode-card {
                height: 300px;
            }

            #scrollToTopBtn {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
                bottom: 15px;
                right: 15px;
            }
        }
        @media (max-width: 480px) {
            .sidebar {
                width: 100%; /* Full width on tiny screens */
                left: -100%;
            }
            .main-content.sidebar-active {
                margin-left: 100%;
            }
            .container {
                padding: 0 1rem; /* Smaller padding on very small screens */
            }
             .heat-hub-title {
                font-size: clamp(3rem, 15vw, 6rem); /* Adjust for smaller screens */
            }
        }

        /* New animations for heat-hub-title */
        @keyframes heatTextReveal {
            0% {
                opacity: 0;
                transform: translateY(20px) scale(0.95);
                filter: blur(10px);
                text-shadow: 0 0 0px var(--glow-color);
            }
            50% {
                opacity: 1;
                transform: translateY(0) scale(1.02);
                filter: blur(2px);
                text-shadow: 0 0 15px var(--glow-color), 0 0 30px rgba(255, 77, 0, 0.7);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0);
                text-shadow: 0 0 8px var(--glow-color), 0 0 15px rgba(255, 77, 0, 0.5);
            }
        }

        @keyframes glowPulse {
            0% {
                text-shadow: 0 0 10px var(--glow-color), 0 0 20px var(--glow-color), 0 0 30px rgba(255, 77, 0, 0.3);
                transform: scale(1);
            }
            50% {
                text-shadow: 0 0 15px var(--glow-color), 0 0 30px var(--glow-color), 0 0 50px rgba(255, 77, 0, 0.5);
                transform: scale(1.02); /* Subtle expansion */
            }
            100% {
                text-shadow: 0 0 10px var(--glow-color), 0 0 20px var(--glow-color), 0 0 30px rgba(255, 77, 0, 0.3);
                transform: scale(1);
            }
        }

        @keyframes colorShift {
            0% { color: #ff6b00; }
            25% { color: #ffaa00; }
            50% { color: #ff4500; }
            75% { color: #ff6b00; }
            100% { color: #ff6b00; }
        }

        @keyframes fireFlicker {
            0%, 100% { opacity: 1; transform: scale(1); }
            25% { opacity: 0.8; transform: scale(0.98); }
            50% { opacity: 1.1; transform: scale(1.02); }
            75% { opacity: 0.9; transform: scale(0.99); }
        }

        .heat-hub-title {
            font-weight: bold; 
            font-size: clamp(3rem, 10vw, 125px); /* Adjusted for responsiveness */
            font-family: 'Oswald', sans-serif; /* Applied Oswald font */
            color: var(--primary-color); /* Uses --primary-color from your root */
            text-shadow: 0 0 8px var(--glow-color), 0 0 15px rgba(255, 77, 0, 0.5); /* Refined glow */
            animation: heatTextReveal 1.5s ease-out forwards, /* Initial reveal */
                       glowPulse 2s infinite alternate 1.5s, /* Continuous glow after reveal */
                       colorShift 6s infinite linear 1.5s; /* Continuous color shift after reveal */
            display: inline-block;
            position: relative; /* Ensure it's above the 3D background */
            z-index: 5;
            opacity: 0; /* Hidden initially for reveal */
            transform: translateY(20px) scale(0.95); /* Initial state for reveal */
            filter: blur(10px); /* Initial blur for reveal */
        }
        
        .heat-hub-title .fire-emoji {
            display: inline-block; /* To allow transform */
            animation: fireFlicker 0.8s infinite alternate;
        }

        .main-title-container {
            text-align: center;
            margin-top: 50px; /* Add some top margin to prevent overlap with menu button */
            position: relative; /* Ensure z-index works */
            z-index: 5;
        }
    </style>
</head>
<body>
    <!-- Three.js Background Canvas Container -->
    <div id="threejs-background"></div>

    <div class="main-title-container">
        <h1 class="heat-hub-title"><span class="fire-emoji">ðŸ”¥</span> Heat Hub</h1>
    </div>
    <!-- Sidebar Navigation -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h1 class="logo">HEAT HUB</h1>
            <button class="close-btn"><i class="fas fa-times"></i></button>
        </div>
        <ul class="sidebar-menu">
            <li><a href="HT.html" class="active animate-from-left delay-0"><i class="fas fa-home"></i> Home</a></li>
            
            <li><a href="AR/front.html" class="animate-from-left delay-2"><i class="fas fa-cube"></i> AR Models</a></li>
           
            <li><a href="tutorial.html" class="animate-from-left delay-4"><i class="fas fa-book"></i> Tutorials</a></li>
            <li><a href="calculator.html" class="animate-from-left delay-5"><i class="fas fa-calculator"></i> Calculators</a></li>
            <li><a href="contact.html" class="animate-from-left delay-6"><i class="fas fa-envelope"></i> Contact</a></li>
        </ul>
        <div class="sidebar-footer">
            
            <div class="social-links">
                <a href="#"><i class="fab fa-facebook"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-linkedin"></i></a>
                <a href="#"><i class="fab fa-youtube"></i></a>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Menu Button -->
        <button class="menu-btn animate"><i class="fas fa-bars"></i></button>

        <!-- Hero Section -->
           <section class="section hero">
               <div class="container">
                   <div class="hero-content">
                       <h1 class="hero-title fade-in delay-3">Master the Science of Heat Transfer</h1>
                       <p class="hero-subtitle fade-in delay-4">Explore the fundamental modes of thermal energy movement through interactive learning and cutting-edge visualization</p>
                       <p class="tagline fade-in delay-5">"The transfer of heat is proportional to the temperature gradient and occurs in the direction of decreasing temperature." â€“ <em>Joseph Fourier</em></p>
                   </div>
               </div>
           </section>

        <!-- Rest of your content remains the same -->
        <!-- Modes of Heat Transfer -->
        <section class="section">
            <div class="container">
                <div class="section-header fade-in delay-0">
                    <h2>Modes of Heat Transfer</h2>
                    <p class="delay-1">Discover the three fundamental mechanisms that govern thermal energy movement</p>
                </div>
                
                <div class="modes-grid">
                    <a href="../CONDUCTION/conduction.html" class="mode-card conduction fade-in delay-1">
                        <h3 class="mode-title">Conduction</h3>
                        <p class="mode-description">Heat transfer through direct molecular interaction within solids or stationary fluids</p>
                        <span class="mode-link">Explore <span>â†’</span></span>
                    </a>
                    
                    <a href="../CONVECTION/convection.html" class="mode-card convection fade-in delay-2">
                        <h3 class="mode-title">Convection</h3>
                        <p class="mode-description">Thermal energy movement through fluid motion and bulk transport</p>
                        <span class="mode-link">Explore <span>â†’</span></span>
                    </a>
                    
                    <a href="../RADIATION/radiation.html" class="mode-card radiation fade-in delay-3">
                        <h3 class="mode-title">Radiation</h3>
                        <p class="mode-description">Electromagnetic wave propagation of thermal energy without medium</p>
                        <span class="mode-link">Explore <span>â†’</span></span>
                    </a>
                </div>
            </div>
        </section>

        <!-- Industrial Applications -->
        <section class="section" style="background: rgba(10, 10, 10, 0.5);">
            <div class="container">
                <div class="section-header fade-in delay-0">
                    <h2>Industrial & Engineering Applications</h2>
                    <p class="delay-1">Practical implementations of heat transfer principles across industries</p>
                </div>
                
                <div class="applications-grid">
                    <div class="app-card fade-in delay-1">
                        <h3>Heat Exchangers</h3>
                        <p>Optimizing energy transfer in power plants and industrial processes</p>
                    </div>
                    
                    <div class="app-card fade-in delay-1">
                        <h3>Spacecraft Thermal Protection</h3>
                        <p>Managing extreme temperature variations in space environments</p>
                    </div>
                    
                    <div class="app-card fade-in delay-2">
                        <h3>Laser Cooling</h3>
                        <p>Precision temperature control in optical systems</p>
                    </div>
                    
                    <div class="app-card fade-in delay-2">
                        <h3>Cryogenic Systems</h3>
                        <p>Ultra-low temperature applications and preservation</p>
                    </div>
                    
                    <div class="app-card fade-in delay-3">
                        <h3>Nuclear Reactor Cooling</h3>
                        <p>Critical safety systems for thermal management</p>
                    </div>
                    
                    <div class="app-card fade-in delay-3">
                        <h3>Jet Engine Cooling</h3>
                        <p>High-performance thermal solutions for aerospace</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Importance Section -->
        <section class="section">
            <div class="container">
                <div class="section-header fade-in delay-0">
                    <h2>Why Heat Transfer Matters</h2>
                    <p class="delay-1">Fundamental principles with wide-ranging impacts</p>
                </div>
                
                <div class="about-content fade-in delay-2">
                    <p>Heat transfer is an essential phenomenon that governs countless aspects of our daily lives and industrial processes. From the warmth we feel from sunlight to the cooling of electronic devices, understanding thermal energy movement enables technological advancements and energy-efficient solutions across all sectors of modern society.</p>
                </div>
            </div>
        </section>

        <!-- Emerging Technologies -->
        <section class="section" style="background: rgba(10, 10, 10, 0.5);">
            <div class="container">
                <div class="section-header fade-in delay-0">
                    <h2>Emerging Technologies</h2>
                    <p class="delay-1">Innovations pushing the boundaries of thermal science</p>
                </div>
                
                <div class="applications-grid">
                    <div class="app-card fade-in delay-1">
                        <h3>Thermal Metamaterials</h3>
                        <p>Materials engineered to control heat flow in unprecedented ways</p>
                    </div>
                    
                    <div class="app-card fade-in delay-1">
                        <h3>Phase-Change Materials</h3>
                        <p>Revolutionizing thermal energy storage and regulation</p>
                    </div>
                    
                    <div class="app-card fade-in delay-2">
                        <h3>Nanostructured Materials</h3>
                        <p>Precision thermal control at molecular scales</p>
                    </div>
                    
                    <div class="app-card fade-in delay-2">
                        <h3>Quantum Heat Conduction</h3>
                        <p>Exploring thermal phenomena at quantum scales</p>
                    </div>
                    
                    <div class="app-card fade-in delay-3">
                        <h3>Bio-Inspired Designs</h3>
                        <p>Learning from nature's thermal management solutions</p>
                    </div>
                    
                    <div class="app-card fade-in delay-3">
                        <h3>Smart Thermal Systems</h3>
                        <p>Adaptive, responsive heat transfer technologies</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Founder -->
        <section class="section">
            <div class="container">
                <div class="section-header fade-in delay-0">
                    <h2>About The Founder</h2>
                </div>
                
                <div class="about-content fade-in delay-2">
                    <p><span class="founder-highlight">HEAT HUB</span> was founded by <span class="founder-highlight">RAGUNATH.A, B.Tech Chemical Engineering</span>, a passionate thermal sciences researcher dedicated to advancing heat transfer education through innovative digital platforms.</p>
                    <p>With expertise in chemical engineering and thermal systems, the founder created HEAT HUB to bridge the gap between academic theory and practical application, making complex thermal concepts accessible to students and professionals worldwide.</p>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="fade-in delay-0">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-column">
                        <h3>Explore</h3>
                        <ul class="footer-links">
                            <li class="footer-link"><a href="flowchart.html">Flow Chart</a></li>
                            <li class="footer-link"><a href="problemsolving.html">Problem Solving</a></li>
                            <li class="footer-link"><a href="AR/front.html">AR Models</a></li>
                            <li class="footer-link"><a href="researchpaper.html">Research Papers</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h3>Resources</h3>
                        <ul class="footer-links">
                            <li class="footer-link"><a href="tutorial.html">Tutorials</a></li>
                            <li class="footer-link"><a href="calculator.html">Calculators</a></li>
                            <li class="footer-link"><a href="casestudy.html">Case Studies</a></li>
                            <li class="footer-link"><a href="glossary.html">Glossary</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-column">
                        <h3>Connect</h3>
                        <ul class="footer-links">
                            <li class="footer-link"><a href="contact.html">Contact Us</a></li>
                            <li class="footer-link"><a href="contribute.html">Contribute</a></li>
                            <li class="footer-link"><a href="feedback.html">Feedback</a></li>
                            <li class="footer-link"><a href="career.html">Careers</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="copyright">
                    <p>&copy; 2025 HEAT HUB | All Rights Reserved</p>
                </div>
            </div>
        </footer>

        <!-- Scroll to Top Button -->
        <button id="scrollToTopBtn" title="Go to top">
            <i class="fas fa-arrow-up"></i>
        </button>
    </div>

    <script>
        // Sidebar functionality
        const menuBtn = document.querySelector('.menu-btn');
        const closeBtn = document.querySelector('.close-btn');
        const sidebar = document.querySelector('.sidebar');
        const mainContent = document.querySelector('.main-content');
        const scrollToTopBtn = document.getElementById('scrollToTopBtn');


        menuBtn.addEventListener('click', () => {
            sidebar.classList.add('active');
            mainContent.classList.add('sidebar-active');
        });

        closeBtn.addEventListener('click', () => {
            sidebar.classList.remove('active');
            mainContent.classList.remove('sidebar-active');
        });

        // Close sidebar when clicking outside
        document.addEventListener('click', (e) => {
            if (!sidebar.contains(e.target) && e.target !== menuBtn && !menuBtn.contains(e.target)) {
                sidebar.classList.remove('active');
                mainContent.classList.remove('sidebar-active');
            }
        });

        // Scroll to top functionality
        scrollToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });


        // Add loaded class for animations
        document.addEventListener('DOMContentLoaded', () => {
            // Initial animation for hero section elements
            const heroTitle = document.querySelector('.hero-title');
            const heroSubtitle = document.querySelector('.hero-subtitle');
            const tagline = document.querySelector('.tagline');
            const navLinks = document.querySelectorAll('.sidebar-menu li a');
            const menuButton = document.querySelector('.menu-btn');

            // Apply 'animate' class to hero elements with appropriate delays
            // The heat-hub-title animation is handled directly by its CSS
            if (menuButton) menuButton.classList.add('animate'); // Menu button scale-in animation

            // Staggered animation for navigation links (triggered when sidebar opens)
            // The 'animate-from-left' class is now applied directly in HTML with delays
            // The active class for sidebar is handled by the sidebar toggle logic
            
            // Animate elements when they come into view using Intersection Observer
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // Apply specific animation classes based on element type
                        if (entry.target.classList.contains('section-header')) {
                            entry.target.classList.add('animate'); // Uses fadeInHeader
                        } else if (entry.target.classList.contains('mode-card')) {
                            entry.target.classList.add('animate'); // Uses fadeInModeCard
                        } else {
                            entry.target.classList.add('animate'); // Uses general fadeIn
                        }
                    } else {
                        // Optional: remove 'animate' class when out of view to re-trigger on scroll back
                        // entry.target.classList.remove('animate'); 
                    }
                });
            }, { threshold: 0.1 }); // Trigger when 10% of element is visible
            
            // Observe all elements that should have the 'fade-in' animation
            document.querySelectorAll('.section-header, .mode-card, .app-card, footer').forEach(el => {
                observer.observe(el);
            });

            // Add hover effects to cards (already present and working)
            const cards = document.querySelectorAll('.app-card, .mode-card');
            cards.forEach(card => {
                card.addEventListener('mouseenter', () => {
                    // This is handled by CSS :hover now for mode-card and app-card
                });
                card.addEventListener('mouseleave', () => {
                    // This is handled by CSS :hover now for mode-card and app-card
                });
            });
        });
    </script>
</body>
</html>
