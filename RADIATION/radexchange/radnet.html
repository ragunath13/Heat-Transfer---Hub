<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radiation Networks (Electrical Analogy)</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Audiowide|Rajdhani|Courier+New">
    <style>
        /* Base styles: Ensuring a deep, consistent black background */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box; /* Includes padding and border in the element's total width and height */
            /* Default background for elements unless specified - slightly off-black for depth */
            background-color: #0a0a0a;
        }

        body {
            background-color: #000000; /* Pure black for the main page background */
            font-family: 'Audiowide', cursive; /* Keeping the distinct, futuristic font */
            color: #d3d3d3; /* A standard light grey for excellent readability on dark backgrounds */
            line-height: 1.6; /* Improves readability of text blocks */
            overflow-x: hidden; /* Prevent horizontal scroll on some subtle effects */
        }

        /* Main Heading: Bold and energetic, central to the radiation theme */
        .main_heading {
            background: linear-gradient(to right, #f40166, #ff2a68, #ff0000); /* Vibrant red/pink/orange gradient */
            font-size: 50px; /* Consistent size for prominence */
            font-family: 'Courier New', monospace; /* A classic techy font */
            font-weight: 900; /* Extra bold for impact */
            color: #000000; /* Black text creates strong contrast on the gradient */
            text-align: center;
            padding: 50px;
            border-radius: 10px;
            box-shadow: 0 0 25px rgba(255, 110, 110, 0.7); /* Stronger, more defined glowing red shadow */
            margin: 30px auto; /* Centers the block and adds vertical spacing */
            max-width: 90%; /* Ensures responsiveness and readability on larger screens */
            will-change: box-shadow; /* Hint to browser for performance optimization */
        }

        /* General Paragraphs: Clean and readable, designed for content */
        p {
            font-size: 22px;
            font-family: 'Audiowide', cursive;
            text-align: center; /* Centered text within paragraphs */
            padding: 20px;
            margin: 25px auto; /* Centers the block and provides vertical spacing */
            max-width: 80%; /* Limits paragraph width for better readability */
            background-color: #1a1a1a; /* Slightly lighter charcoal for subtle visual distinction */
            border-radius: 10px;
            color: #b7b8b8; /* A muted grey for standard text */
            box-shadow: 0 0 8px rgba(255, 42, 104, 0.1); /* Very subtle, understated red glow */
            line-height: 1.7; /* Further improved readability */
        }

        /* Subtopic Headings: Consistent with the main radiation theme's subtopics */
        .subtopics {
            background-image: linear-gradient(58.2deg, rgba(255, 76, 10, 0.9) -3%, rgba(255, 0, 80, 0.8) 49.3%, rgba(255, 200, 0, 0.8) 97.7%); /* Intense, mixed-tone gradient */
            font-size: 28px;
            color: #ffffff;
            font-family: 'Audiowide', cursive;
            font-weight: bold;
            padding: 25px 40px;
            margin: 35px auto; /* Centered with generous spacing */
            max-width: 80%;
            text-align: center;
            border-radius: 15px; /* Softer radius for a less rigid feel */
            border: 2px solid #ff416c; /* A clear, vibrant red border */
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
            transition: all 0.4s ease; /* All-encompassing smooth transition */
            will-change: transform, box-shadow, background;
            cursor: pointer;
        }

        .subtopics:hover {
            transform: scale(1.03) translateY(-3px); /* More noticeable lift and scale */
            background-image: linear-gradient(58.2deg, rgba(255, 0, 80, 0.95) -3%, rgba(255, 76, 10, 0.95) 49.3%, rgba(255, 200, 0, 0.95) 97.7%); /* Even more intense gradient on hover */
            color: #000000; /* Black text for strong contrast on hover */
            box-shadow: 0 0 45px rgba(255, 0, 80, 0.9); /* Enhanced, stronger glow on hover */
        }

        /* Definition Section: Standard content block with clear typography */
        .def {
            background-color: #111111; /* Consistent dark background */
            font-family: 'Audiowide', cursive;
            font-size: 22px; /* Consistent with general paragraphs */
            color: #b7b8b8;
            font-weight: normal; /* Standard weight for content, avoiding excessive boldness */
            text-align: center;
            padding: 30px;
            margin: 35px auto; /* Centered block with consistent spacing */
            max-width: 80%;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(255, 42, 104, 0.15); /* Subtle red glow */
            line-height: 1.7; /* Improved readability */
        }

        /* Fact Section: Highlighted and impactful, drawing attention with electric energy */
        .fact {
            background-color: #0d0d0d; /* Slightly darker than other blocks for more emphasis */
            font-size: 34px;
            color: #00e0ff; /* A vibrant, electric cyan for a striking highlight */
            font-weight: 900;
            font-family: 'Rajdhani', sans-serif; /* A bold, modern sans-serif */
            text-align: center;
            padding: 40px; /* Generous padding for emphasis */
            margin: 35px auto; /* Centers the block */
            max-width: 85%; /* Ensures good presentation on various screen sizes */
            border-radius: 12px;
            box-shadow: 0 0 35px rgba(0, 224, 255, 0.8); /* Intense, bright cyan glow for "energy" */
            transition: transform 0.3s ease, box-shadow 0.3s ease; /* Smooth interaction on hover */
            will-change: transform, box-shadow; /* Hint to browser for performance optimization */
        }

        .fact:hover {
            transform: scale(1.02); /* Slight scale on hover for a dynamic feel */
            box-shadow: 0 0 50px rgba(0, 224, 255, 1); /* Even brighter, stronger glow on hover */
        }

        /* Tech Points List: Professional styling with custom glowing bullets */
        .tech_points {
            list-style-type: none; /* Removes default bullet points */
            padding: 25px; /* Ample internal spacing */
            margin: 30px auto; /* Centers the block horizontally, adds vertical spacing */
            max-width: 85%; /* Ensures readability on large screens, responsive on small */
            background-color: #1a1a1a; /* A deep charcoal for subtle depth against pure black */
            border-radius: 12px; /* Softly rounded corners for a modern feel */
            box-shadow: 0 0 20px rgba(255, 0, 80, 0.15); /* A subtle, outward glow matching the radiation theme */
            color: #dadada; /* Light grey text for excellent contrast */
            font-family: 'Audiowide', cursive;
            font-size: 20px;
            text-align: left; /* Best for list readability */
            line-height: 1.5; /* Improves text readability */
        }

        .tech_points li {
            padding: 15px 0; /* Vertical padding for each list item */
            border-bottom: 1px solid rgba(255, 255, 255, 0.08); /* A very subtle, transparent line separator */
            position: relative; /* Necessary for positioning the custom bullet point */
            padding-left: 35px; /* Creates space for the custom bullet */
            transition: background-color 0.3s ease, transform 0.2s ease; /* Smooth hover effects */
        }

        .tech_points li:last-child {
            border-bottom: none; /* No separator for the very last item */
        }

        /* Custom glowing bullet point for each list item */
        .tech_points li::before {
            content: ''; /* Required for pseudo-elements */
            position: absolute;
            left: 0; /* Aligns to the left of the padding-left */
            top: 50%;
            transform: translateY(-50%); /* Vertically centers the bullet */
            width: 10px; /* Size of the bullet */
            height: 10px;
            border-radius: 50%; /* Makes it a perfect circle */
            background: linear-gradient(45deg, #00e0ff, #0072ff); /* A cool, vibrant electric cyan gradient */
            box-shadow: 0 0 12px rgba(0, 224, 255, 0.8); /* A strong, matching glow around the bullet */
        }

        .tech_points li:hover {
            background-color: #1a1a1a; /* Slightly lighter black on hover for subtle interaction */
            transform: translateX(5px); /* A subtle slide-right effect on hover */
        }

        /* Radiation Networks specific visualizations */
        .network-visual-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 40px auto;
            max-width: 90%;
            background: #111111;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 198, 255, 0.15); /* Subtle blue glow for visual containers */
            position: relative;
        }

        .network-diagram {
            width: 90%;
            max-width: 700px;
            height: 350px;
            background-color: #0d0d0d;
            border-radius: 10px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
            border: 1px solid #333;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .node {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: #ffcc00;
            border-radius: 50%;
            box-shadow: 0 0 10px #ffcc00;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            color: #000;
            font-weight: bold;
        }

        .node-label {
            position: absolute;
            font-family: 'Rajdhani', sans-serif;
            font-size: 16px;
            color: #d3d3d3;
            background-color: rgba(0,0,0,0.7);
            padding: 3px 8px;
            border-radius: 5px;
            white-space: nowrap;
            transform: translateY(-150%); /* Position above node */
        }

        .resistor-line {
            position: absolute;
            height: 3px;
            background-color: #00e0ff;
            transform-origin: left center;
            box-shadow: 0 0 5px #00e0ff;
            z-index: 5;
        }

        .resistor-label {
            position: absolute;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            color: #ff416c;
            background-color: rgba(0,0,0,0.7);
            padding: 2px 5px;
            border-radius: 3px;
            white-space: nowrap;
            transform: translate(-50%, -150%); /* Position above line */
        }

        .current-flow {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #ffcc00;
            box-shadow: 0 0 8px #ffcc00;
            animation: flow-animation 2s linear infinite;
            z-index: 15;
            opacity: 0; /* Hidden by default, activated by JS */
        }

        @keyframes flow-animation {
            0% { transform: translateX(0); opacity: 0; }
            20% { opacity: 1; }
            80% { opacity: 1; }
            100% { transform: translateX(var(--flow-distance)); opacity: 0; }
        }

        .control-panel {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            width: 90%;
            max-width: 700px;
            padding: 15px;
            background-color: #1a1a1a;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(255, 0, 80, 0.1);
        }

        .control-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #d3d3d3;
            font-family: 'Rajdhani', sans-serif;
            font-size: 18px;
        }

        .control-slider {
            width: 150px;
            -webkit-appearance: none;
            height: 8px;
            background: linear-gradient(to right, #00e0ff, #ffcc00);
            border-radius: 4px;
            outline: none;
            opacity: 0.7;
            transition: opacity .2s;
            margin-top: 5px;
        }

        .control-slider:hover {
            opacity: 1;
        }

        .control-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #ffffff;
            cursor: pointer;
            box-shadow: 0 0 8px rgba(255,255,255,0.8);
        }

        .control-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #ffffff;
            cursor: pointer;
            box-shadow: 0 0 8px rgba(255,255,255,0.8);
        }

        .current-value-display {
            font-family: 'Courier New', monospace;
            font-size: 16px;
            color: #ffcc00;
            margin-top: 5px;
        }

        .result-display {
            font-family: 'Courier New', monospace;
            font-size: 28px;
            color: #00e0ff;
            text-shadow: 0 0 10px #00e0ff;
            margin-top: 20px;
            text-align: center;
        }

        /* Application examples grid */
        .app-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px auto;
            max-width: 90%;
        }

        .app-item {
            background: #1a1a1a; /* Consistent dark background for app items */
            padding: 20px;
            border-radius: 10px;
            transition: transform 0.3s ease, background 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 0 10px rgba(0, 198, 255, 0.1); /* Subtle blue glow */
            cursor: pointer;
        }

        .app-item:hover {
            transform: scale(1.03) translateY(-5px); /* Slight lift and scale */
            background: #222222; /* Slightly lighter on hover */
            box-shadow: 0 8px 25px rgba(0, 198, 255, 0.4); /* More pronounced, lifted glow */
        }

        .app-icon {
            font-size: 40px;
            text-align: center;
            margin-bottom: 15px;
            color: #00e0ff; /* Electric cyan for icons */
            text-shadow: 0 0 10px rgba(0, 224, 255, 0.7); /* Glowing icon effect */
        }

        .app-title {
            font-family: 'Rajdhani', sans-serif;
            font-size: 22px;
            color: white;
            margin-bottom: 10px;
            text-align: center;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .main_heading {
                font-size: 40px;
                padding: 30px;
            }
            .subtopics {
                font-size: 22px;
                padding: 12px 20px;
            }
            p, .def {
                font-size: 18px;
                padding: 15px;
                margin: 20px auto;
                max-width: 90%;
            }
            .fact {
                font-size: 28px;
                padding: 30px;
            }
            .tech_points {
                font-size: 18px;
                padding: 20px;
            }
            .tech_points li {
                padding-left: 30px;
            }
            .tech_points li::before {
                width: 8px;
                height: 8px;
            }
            .network-diagram {
                height: 300px;
            }
            .node {
                width: 18px;
                height: 18px;
                font-size: 12px;
            }
            .node-label, .resistor-label {
                font-size: 14px;
            }
            .resistor-line {
                height: 2px;
            }
            .current-flow {
                width: 7px;
                height: 7px;
            }
            .control-slider {
                width: 120px;
            }
            .current-value-display {
                font-size: 14px;
            }
            .result-display {
                font-size: 24px;
            }
            .app-grid {
                grid-template-columns: 1fr;
            }
            .app-icon {
                font-size: 36px;
            }
            .app-title {
                font-size: 20px;
            }
        }

        @media (max-width: 480px) {
            .main_heading {
                font-size: 32px;
                padding: 20px;
            }
            .subtopics {
                font-size: 18px;
                padding: 10px 15px;
            }
            p, .def {
                font-size: 16px;
                padding: 12px;
                margin: 15px auto;
            }
            .fact {
                font-size: 24px;
                padding: 25px;
            }
            .tech_points {
                font-size: 16px;
                padding: 15px;
            }
            .tech_points li {
                padding-left: 25px;
            }
            .tech_points li::before {
                width: 6px;
                height: 6px;
            }
            .network-diagram {
                height: 250px;
            }
            .node {
                width: 15px;
                height: 15px;
                font-size: 10px;
            }
            .node-label, .resistor-label {
                font-size: 12px;
            }
            .resistor-line {
                height: 1.5px;
            }
            .current-flow {
                width: 6px;
                height: 6px;
            }
            .control-panel {
                gap: 10px;
                padding: 10px;
            }
            .control-slider {
                width: 100px;
            }
            .current-value-display {
                font-size: 12px;
            }
            .result-display {
                font-size: 20px;
            }
            .app-icon {
                font-size: 32px;
            }
            .app-title {
                font-size: 18px;
            }
        }
    </style>
</head>
<body>

    <div class="main_heading">Radiation Networks (Electrical Analogy)</div>

    <div class="def">
        <p>Analyzing radiation heat transfer in enclosures with multiple surfaces can be complex. The **radiation network method** provides a powerful analogy to electrical circuits, simplifying the analysis by representing radiative heat flow as current, emissive power as potential, and surface/space characteristics as resistances.</p>
        <p>This method is particularly useful for solving problems involving diffuse, gray surfaces in an enclosure.</p>
    </div>

    <div class="subtopics">The Electrical Analogy</div>

    <div class="def">
        <p>The core of the radiation network method lies in drawing parallels between radiative heat transfer and electrical circuits:</p>
        <ul class="tech_points">
            <li><b>Heat Transfer Rate ($Q$)</b> is analogous to **Electric Current ($I$)**.</li>
            <li><b>Blackbody Emissive Power ($E_b = \sigma T^4$)</b> is analogous to **Voltage Potential ($V$)**. This is the driving potential for radiation.</li>
            <li><b>Radiosity ($J$)</b> is analogous to **Node Potential** in the network.</li>
            <li><b>Radiation Resistances</b> are analogous to **Electrical Resistances ($R$)**.</li>
        </ul>
        <p>Just as Ohm's Law states $I = V/R$, radiative heat transfer can be expressed as $Q = \Delta E_b / R_{total}$.</p>
    </div>

    <div class="subtopics">Types of Radiation Resistances</div>

    <div class="def">
        <p>There are two primary types of resistances in a radiation network:</p>
        <ul class="tech_points">
            <li><b>Surface Resistance ($R_{surface}$):</b> Represents the resistance of a surface to emitting radiation. It accounts for the difference between the blackbody emissive power ($E_b$) at the surface's temperature and its actual radiosity ($J$).
                <p>$R_{surface} = \frac{1 - \epsilon}{A \epsilon}$</p>
                Where $A$ is the surface area and $\epsilon$ is its emissivity. This resistance connects the $E_b$ potential node to the $J$ potential node for that surface.
            </li>
            <li><b>Space Resistance ($R_{space}$):</b> Represents the resistance to radiation transfer between two surfaces in space. It accounts for the geometric orientation and view between surfaces.
                <p>$R_{space} = \frac{1}{A_i F_{i \to j}}$</p>
                Where $A_i$ is the area of the emitting surface and $F_{i \to j}$ is the view factor from surface $i$ to surface $j$. This resistance connects the radiosity ($J$) nodes of two different surfaces.
            </li>
        </ul>
    </div>

    <div class="subtopics">Interactive Network Diagram</div>

    <div class="network-visual-container">
        <h3>Simple Two-Surface Enclosure Network</h3>
        <div class="network-diagram" id="network-diagram">
            <div class="node" id="node-eb1" style="left: 10%; top: 25%;"></div>
            <span class="node-label" style="left: 10%; top: 25%;">E<sub>b1</sub></span>

            <div class="node" id="node-j1" style="left: 35%; top: 25%;"></div>
            <span class="node-label" style="left: 35%; top: 25%;">J<sub>1</sub></span>

            <div class="node" id="node-j2" style="left: 65%; top: 25%;"></div>
            <span class="node-label" style="left: 65%; top: 25%;">J<sub>2</sub></span>

            <div class="node" id="node-eb2" style="left: 90%; top: 25%;"></div>
            <span class="node-label" style="left: 90%; top: 25%;">E<sub>b2</sub></span>

            <div class="resistor-line" id="res-s1" style="left: 10%; top: 25%; width: 25%; transform: translateX(10px);"></div>
            <span class="resistor-label" style="left: 22.5%; top: 25%;">R<sub>s1</sub></span>

            <div class="resistor-line" id="res-space" style="left: 35%; top: 25%; width: 30%; transform: translateX(10px);"></div>
            <span class="resistor-label" style="left: 50%; top: 25%;">R<sub>space</sub></span>

            <div class="resistor-line" id="res-s2" style="left: 65%; top: 25%; width: 25%; transform: translateX(10px);"></div>
            <span class="resistor-label" style="left: 77.5%; top: 25%;">R<sub>s2</sub></span>

            <div class="current-flow" id="flow-s1-to-j1" style="left: 10%; top: 25%; animation-delay: 0s;"></div>
            <div class="current-flow" id="flow-j1-to-j2" style="left: 35%; top: 25%; animation-delay: 0.5s;"></div>
            <div class="current-flow" id="flow-j2-to-eb2" style="left: 65%; top: 25%; animation-delay: 1s;"></div>
        </div>
        <div class="control-panel">
            <div class="control-group">
                <label for="temp1-slider">T₁ (K):</label>
                <input type="range" id="temp1-slider" class="control-slider" min="100" max="1000" value="500">
                <span id="temp1-value" class="current-value-display">500 K</span>
            </div>
            <div class="control-group">
                <label for="emissivity1-slider">$\epsilon_1$:</label>
                <input type="range" id="emissivity1-slider" class="control-slider" min="0.1" max="1.0" step="0.05" value="0.8">
                <span id="emissivity1-value" class="current-value-display">0.80</span>
            </div>
            <div class="control-group">
                <label for="temp2-slider">T₂ (K):</label>
                <input type="range" id="temp2-slider" class="control-slider" min="100" max="1000" value="300">
                <span id="temp2-value" class="current-value-display">300 K</span>
            </div>
            <div class="control-group">
                <label for="emissivity2-slider">$\epsilon_2$:</label>
                <input type="range" id="emissivity2-slider" class="control-slider" min="0.1" max="1.0" step="0.05" value="0.6">
                <span id="emissivity2-value" class="current-value-display">0.60</span>
            </div>
            <div class="control-group">
                <label for="view-factor-slider">F₁₂:</label>
                <input type="range" id="view-factor-slider" class="control-slider" min="0.1" max="1.0" step="0.05" value="0.5">
                <span id="view-factor-value" class="current-value-display">0.50</span>
            </div>
        </div>
        <div class="result-display" id="net-heat-transfer-display">
            Net Heat Transfer (Q₁₂): Calculating...
        </div>
        <p>Adjust the temperatures, emissivities, and view factor. Observe how the calculated resistances change, and how the "current" (heat flow) varies in magnitude and direction through the network. The thickness of the resistor lines and speed of particles will indicate the heat flow.</p>
    </div>

    <div class="fact">
        DID YOU KNOW? The radiation network method is particularly powerful because it allows for the inclusion of reradiating surfaces (surfaces that are adiabatic, meaning they have no net heat transfer) by simply leaving their $E_b$ nodes disconnected!
    </div>

    <div class="subtopics">Implications and Applications</div>

    <div class="def">
        <ul class="tech_points">
            <li><b>Complex Enclosures:</b> Solving radiative heat transfer problems in enclosures with multiple surfaces (e.g., rooms, furnaces, spacecraft).</li>
            <li><b>Adiabatic Surfaces:</b> Easily modeling surfaces that are perfectly insulated and only reradiate energy.</li>
            <li><b>Radiation Shields:</b> Analyzing the effectiveness of radiation shields in reducing heat transfer between surfaces.</li>
            <li><b>Thermal Design:</b> Optimizing surface properties and geometries to achieve desired heat transfer rates in various engineering systems.</li>
            <li><b>Software Implementation:</b> The network analogy forms the basis for many numerical algorithms used in thermal analysis software.</li>
        </ul>
    </div>

    <div class="app-grid">
        <div class="app-item">
            <div class="app-icon">🏭</div>
            <div class="app-title">Furnace Analysis</div>
            <p>Modeling heat exchange between flame, walls, and workpieces.</p>
        </div>
        <div class="app-item">
            <div class="app-icon">🏠</div>
            <div class="app-title">Building Thermal Models</div>
            <p>Calculating radiant heat loads between interior surfaces.</p>
        </div>
        <div class="app-item">
            <div class="app-icon">🛰️</div>
            <div class="app-title">Spacecraft Thermal Control</div>
            <p>Designing multi-surface systems for precise temperature regulation.</p>
        </div>
        <div class="app-item">
            <div class="app-icon">🧊</div>
            <div class="app-title">Cryogenic Systems</div>
            <p>Quantifying heat leakage through radiation shields.</p>
        </div>
        <div class="app-item">
            <div class="app-icon">💻</div>
            <div class="app-title">CFD & FEA Software</div>
            <p>Underlying principle for radiation modules in simulation tools.</p>
        </div>
        <div class="app-item">
            <div class="app-icon">💡</div>
            <div class="app-title">Radiant Heating/Cooling</div>
            <p>Designing efficient radiant panel systems.</p>
        </div>
    </div>

    <script>
        // Stefan-Boltzmann constant
        const SIGMA = 5.670e-8; // W/(m^2 * K^4)

        // Get elements
        const temp1Slider = document.getElementById('temp1-slider');
        const emissivity1Slider = document.getElementById('emissivity1-slider');
        const temp2Slider = document.getElementById('temp2-slider');
        const emissivity2Slider = document.getElementById('emissivity2-slider');
        const viewFactorSlider = document.getElementById('view-factor-slider');

        const temp1ValueDisplay = document.getElementById('temp1-value');
        const emissivity1ValueDisplay = document.getElementById('emissivity1-value');
        const temp2ValueDisplay = document.getElementById('temp2-value');
        const emissivity2ValueDisplay = document.getElementById('emissivity2-value');
        const viewFactorValueDisplay = document.getElementById('view-factor-value');

        const netHeatTransferDisplay = document.getElementById('net-heat-transfer-display');

        const resS1Line = document.getElementById('res-s1');
        const resSpaceLine = document.getElementById('res-space');
        const resS2Line = document.getElementById('res-s2');

        const flowS1toJ1 = document.getElementById('flow-s1-to-j1');
        const flowJ1toJ2 = document.getElementById('flow-j1-to-j2');
        const flowJ2toEb2 = document.getElementById('flow-j2-to-eb2');

        // Initial surface areas (conceptual, in m^2 for calculation)
        const A1 = 1.0; // Assume 1 m^2 for simplicity in this network
        const A2 = 1.0; // Assume 1 m^2 for simplicity

        // Function to update the visualization and calculations
        function updateNetworkVisualization() {
            const T1 = parseFloat(temp1Slider.value);
            const epsilon1 = parseFloat(emissivity1Slider.value);
            const T2 = parseFloat(temp2Slider.value);
            const epsilon2 = parseFloat(emissivity2Slider.value);
            const F12 = parseFloat(viewFactorSlider.value);

            // Update display values
            temp1ValueDisplay.textContent = `${T1} K`;
            emissivity1ValueDisplay.textContent = epsilon1.toFixed(2);
            temp2ValueDisplay.textContent = `${T2} K`;
            emissivity2ValueDisplay.textContent = epsilon2.toFixed(2);
            viewFactorValueDisplay.textContent = F12.toFixed(2);

            // Calculate blackbody emissive powers (potentials)
            const Eb1 = SIGMA * Math.pow(T1, 4);
            const Eb2 = SIGMA * Math.pow(T2, 4);

            // Calculate resistances
            let R_s1 = (1 - epsilon1) / (A1 * epsilon1);
            let R_s2 = (1 - epsilon2) / (A2 * epsilon2);
            const R_space = 1 / (A1 * F12); // Assuming F12 is from A1 to A2

            // Handle edge cases for surface resistance (epsilon = 0 or 1)
            if (epsilon1 === 0) R_s1 = Infinity;
            if (epsilon1 === 1) R_s1 = 0;
            if (epsilon2 === 0) R_s2 = Infinity;
            if (epsilon2 === 1) R_s2 = 0;

            // Calculate total resistance
            const totalResistance = R_s1 + R_space + R_s2;

            // Calculate net heat transfer (current)
            let Q12;
            if (totalResistance === 0) {
                Q12 = A1 * SIGMA * (T1**4 - T2**4); // Direct blackbody exchange if no resistance
            } else if (totalResistance === Infinity) {
                Q12 = 0; // No heat transfer if total resistance is infinite
            } else {
                Q12 = (Eb1 - Eb2) / totalResistance;
            }

            netHeatTransferDisplay.textContent = `Net Heat Transfer (Q₁₂): ${Q12.toFixed(3)} W`;

            // Adjust line thickness for visual representation of resistance/flow
            const maxResistanceValue = 1000; // A reasonable max for visual scaling
            const minLineThickness = 1;
            const maxLineThickness = 5;

            // Scale thickness inversely with resistance (higher resistance = thinner line)
            const getThickness = (resistance) => {
                if (resistance === Infinity) return minLineThickness;
                if (resistance === 0) return maxLineThickness;
                const normalizedResistance = Math.min(resistance, maxResistanceValue) / maxResistanceValue;
                return maxLineThickness - (normalizedResistance * (maxLineThickness - minLineThickness));
            };

            resS1Line.style.height = `${getThickness(R_s1)}px`;
            resSpaceLine.style.height = `${getThickness(R_space)}px`;
            resS2Line.style.height = `${getThickness(R_s2)}px`;

            // Animate current flow particles
            animateFlow(Q12);
        }

        function animateFlow(netHeat) {
            const flowElements = [flowS1toJ1, flowJ1toJ2, flowJ2toEb2];
            const flowSpeed = 2; // seconds for one full cycle

            // Determine flow direction and visibility
            if (Math.abs(netHeat) < 0.001) { // Very low heat transfer, hide particles
                flowElements.forEach(el => {
                    el.style.opacity = 0;
                    el.style.animationPlayState = 'paused';
                });
                return;
            }

            const direction = netHeat > 0 ? 1 : -1; // 1 for left-to-right, -1 for right-to-left
            const absNetHeat = Math.abs(netHeat);

            // Scale particle density/speed based on magnitude of heat transfer
            const particleAnimationDuration = flowSpeed / (1 + absNetHeat * 0.5); // Faster for higher flow

            flowElements.forEach((el, index) => {
                const parentRect = el.parentElement.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const startX = parseFloat(el.style.left); // Percentage
                const width = parseFloat(el.style.width); // Percentage

                // Calculate flow distance in pixels (conceptual for animation)
                const flowDistance = (width / 100) * parentRect.width;

                el.style.animationDuration = `${particleAnimationDuration}s`;
                el.style.animationDirection = direction === 1 ? 'normal' : 'reverse';
                el.style.setProperty('--flow-distance', `${flowDistance}px`);
                el.style.animationPlayState = 'running';
                el.style.opacity = 1;
            });
        }

        // Event listeners for sliders
        temp1Slider.addEventListener('input', updateNetworkVisualization);
        emissivity1Slider.addEventListener('input', updateNetworkVisualization);
        temp2Slider.addEventListener('input', updateNetworkVisualization);
        emissivity2Slider.addEventListener('input', updateNetworkVisualization);
        viewFactorSlider.addEventListener('input', updateNetworkVisualization);

        // Initial update on page load
        document.addEventListener('DOMContentLoaded', updateNetworkVisualization);
    </script>

</body>
</html>
